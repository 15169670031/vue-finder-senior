"use strict";var xr=Object.defineProperty;var _r=(o,t,n)=>t in o?xr(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var Zo=(o,t,n)=>(_r(o,typeof t!="symbol"?t+"":t,n),n);const e=require("vue"),wr=require("mitt"),br=require("dragselect"),Er=require("@uppy/core"),Vr=require("@uppy/xhr-upload"),Nr=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const Sr=require("cropperjs");require("microtip/microtip.css");var Nn;const oo=(Nn=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Nn.getAttribute("content");class $r{constructor(t){Zo(this,"config");this.config=t}get config(){return this.config}transformRequestParams(t){const n=this.config,s={};oo!=null&&oo!==""&&(s[n.xsrfHeaderName]=oo);const r=Object.assign({},n.headers,s,t.headers),c=Object.assign({},n.params,t.params),l=t.body,i=n.baseUrl+t.url,a=t.method;let d;a!=="get"&&(l instanceof FormData?(d=l,n.body!=null&&Object.entries(this.config.body).forEach(([m,p])=>{d.append(m,p)})):(d={...l},n.body!=null&&Object.assign(d,this.config.body)));const f={url:i,method:a,headers:r,params:c,body:d};if(n.transformRequest!=null){const m=n.transformRequest({url:i,method:a,headers:r,params:c,body:d});m.url!=null&&(f.url=m.url),m.method!=null&&(f.method=m.method),m.params!=null&&(f.params=m.params??{}),m.headers!=null&&(f.headers=m.headers??{}),m.body!=null&&(f.body=m.body)}return f}getDownloadUrl(t,n){if(n.url!=null)return n.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:t,path:n.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}getPreviewUrl(t,n){if(n.url!=null)return n.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:t,path:n.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}async send(t){const n=this.transformRequestParams(t),s=t.responseType||"json",r={method:t.method,headers:n.headers,signal:t.abortSignal},c=n.url+"?"+new URLSearchParams(n.params);if(n.method!=="get"&&n.body!=null){let i;n.body instanceof FormData?i=t.body:(i=JSON.stringify(n.body),r.headers["Content-Type"]="application/json"),r.body=i}const l=await fetch(c,r);if(l.ok)return await l[s]();throw await l.json()}}function Br(o){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof o=="string"?Object.assign(t,{baseUrl:o}):Object.assign(t,o),new $r(t)}function Cr(o){let t=localStorage.getItem(o+"_storage");const n=e.reactive(JSON.parse(t??"{}"));e.watch(n,s);function s(){Object.keys(n).length?localStorage.setItem(o+"_storage",JSON.stringify(n)):localStorage.removeItem(o+"_storage")}function r(a,d){n[a]=d}function c(a){delete n[a]}function l(){Object.keys(n).map(a=>c(a))}return{getStore:(a,d=null)=>n.hasOwnProperty(a)?n[a]:d,setStore:r,removeStore:c,clearStore:l}}async function Dr(o,t){const n=t[o];return typeof n=="function"?(await n()).default:n}function Tr(o,t,n,s){const{getStore:r,setStore:c}=o,l=e.ref({}),i=e.ref(r("locale",t)),a=(m,p=t)=>{Dr(m,s).then(u=>{l.value=u,c("locale",m),i.value=m,c("translations",u),Object.values(s).length>1&&(n.emit("vf-toast-push",{label:"The language is set to "+m}),n.emit("vf-language-saved"))}).catch(u=>{p?(n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),a(p,null)):n.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};!r("locale")&&!s.length?a(t):l.value=r("translations");const d=(m,...p)=>p.length?d(m=m.replace("%s",p.shift()),...p):m;function f(m,...p){return l.value&&l.value.hasOwnProperty(m)?d(l.value[m],...p):d(m,...p)}return{t:f,changeLocale:a,locale:i}}const oe={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},Mr=Object.values(oe),Ar="2.5.0";function Sn(o,t,n,s,r){return(t=Math,n=t.log,s=1024,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function $n(o,t,n,s,r){return(t=Math,n=t.log,s=1e3,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function Lr(o){const t={k:1,m:2,g:3,t:4},s=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(o);return s[1]*Math.pow(1024,t[s[2].toLowerCase()])}const ze={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function Or(o,t){const n=e.ref(ze.SYSTEM),s=e.ref(ze.LIGHT);n.value=o.getStore("theme",t??ze.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),c=l=>{n.value===ze.DARK||n.value===ze.SYSTEM&&l.matches?s.value=ze.DARK:s.value=ze.LIGHT};return c(r),r.addEventListener("change",c),{value:n,actualValue:s,set(l){n.value=l,l!==ze.SYSTEM?o.setStore("theme",l):o.removeStore("theme"),c(r)}}}function Fr(){const o=e.shallowRef(null),t=e.ref(!1),n=e.ref();return{visible:t,type:o,data:n,open:(c,l=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,o.value=c,n.value=l},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,o.value=null}}}/*!
 * OverlayScrollbars
 * Version: 2.8.3
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const ke=(o,t)=>{const{o:n,i:s,u:r}=o;let c=n,l;const i=(f,m)=>{const p=c,u=f,h=m||(s?!s(p,u):p!==u);return(h||r)&&(c=u,l=p),[c,h,l]};return[t?f=>i(t(c,l),f):i,f=>[c,!!f,l]]},Bn=typeof window<"u"&&typeof document<"u",he=Bn?window:{},At=Math.max,Hr=Math.min,io=Math.round,Lt=Math.abs,en=Math.sign,jt=he.cancelAnimationFrame,st=he.requestAnimationFrame,vt=he.setTimeout,uo=he.clearTimeout,It=o=>typeof he[o]<"u"?he[o]:void 0,Rr=It("MutationObserver"),tn=It("IntersectionObserver"),Ot=It("ResizeObserver"),mo=It("ScrollTimeline"),Cn=Bn&&Node.ELEMENT_NODE,{toString:qf,hasOwnProperty:no}=Object.prototype,Ut=o=>o===void 0,Bo=o=>o===null,Se=o=>typeof o=="number",Pt=o=>typeof o=="string",Dn=o=>typeof o=="boolean",xe=o=>typeof o=="function",Be=o=>Array.isArray(o),gt=o=>typeof o=="object"&&!Be(o)&&!Bo(o),qt=o=>{const t=!!o&&o.length,n=Se(t)&&t>-1&&t%1==0;return Be(o)||!xe(o)&&n?t>0&&gt(o)?t-1 in o:!0:!1},Ft=o=>{if(!o||!gt(o))return!1;let t;const n="constructor",s=o[n],r=s&&s.prototype,c=no.call(o,n),l=r&&no.call(r,"isPrototypeOf");if(s&&!c&&!l)return!1;for(t in o);return Ut(t)||no.call(o,t)},Ht=o=>{const t=HTMLElement;return o?t?o instanceof t:o.nodeType===Cn:!1},Gt=o=>{const t=Element;return o?t?o instanceof t:o.nodeType===Cn:!1},on=()=>performance.now(),zr=(o,t,n,s,r)=>{let c=0;const l=on(),i=At(0,n),a=d=>{const f=on(),p=f-l>=i,u=d?1:1-(At(0,l+i-f)/i||0),h=(t-o)*(xe(r)?r(u,u*i,0,1,i):u)+o,k=p||u===1;s&&s(h,u,k),c=k?0:st(()=>a())};return a(),d=>{jt(c),d&&a(d)}};function X(o,t){if(qt(o))for(let n=0;n<o.length&&t(o[n],n,o)!==!1;n++);else o&&X(Object.keys(o),n=>t(o[n],n,o));return o}const Co=(o,t)=>o.indexOf(t)>=0,Oe=(o,t)=>o.concat(t),se=(o,t,n)=>(!Pt(t)&&qt(t)?Array.prototype.push.apply(o,t):o.push(t),o),Ke=o=>Array.from(o||[]),Tn=o=>Be(o)?o:[o],fo=o=>!!o&&!o.length,nn=o=>Ke(new Set(o)),Ee=(o,t,n)=>{X(o,r=>r&&r.apply(void 0,t||[])),!n&&(o.length=0)},Do="paddingTop",dt="paddingRight",ut="paddingLeft",mt="paddingBottom",ft="marginLeft",pt="marginRight",ot="marginBottom",Mn="overflowX",An="overflowY",Pe="width",Qe="height",Ie="visible",We="hidden",Ze="scroll",jr=o=>{const t=String(o||"");return t?t[0].toUpperCase()+t.slice(1):""},Kt=(o,t,n,s)=>{if(o&&t){let r=!0;return X(n,c=>{const l=o[c],i=t[c];l!==i&&(r=!1)}),r}return!1},To=(o,t)=>Kt(o,t,["w","h"]),Ct=(o,t)=>Kt(o,t,["x","y"]),Ir=(o,t)=>Kt(o,t,["t","r","b","l"]),$e=()=>{},U=(o,...t)=>o.bind(0,...t),Ye=o=>{let t;const n=o?vt:st,s=o?uo:jt;return[r=>{s(t),t=n(()=>r(),xe(o)?o():o)},()=>s(t)]},po=(o,t)=>{const{_:n,p:s,v:r,m:c}=t||{};let l,i,a,d,f=$e;const m=function(v){f(),uo(l),d=l=i=void 0,f=$e,o.apply(this,v)},p=k=>c&&i?c(i,k):k,u=()=>{f!==$e&&m(p(a)||a)},h=function(){const v=Ke(arguments),x=xe(n)?n():n;if(Se(x)&&x>=0){const C=xe(s)?s():s,D=Se(C)&&C>=0,A=x>0?vt:st,S=x>0?uo:jt,$=p(v)||v,E=m.bind(0,$);let w;f(),r&&!d?(E(),d=!0,w=A(()=>d=void 0,x)):(w=A(E,x),D&&!l&&(l=vt(u,C))),f=()=>S(w),i=a=$}else m(v)};return h.S=u,h},Ln=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),Ce=o=>o?Object.keys(o):[],Y=(o,t,n,s,r,c,l)=>{const i=[t,n,s,r,c,l];return(typeof o!="object"||Bo(o))&&!xe(o)&&(o={}),X(i,a=>{X(a,(d,f)=>{const m=a[f];if(o===m)return!0;const p=Be(m);if(m&&Ft(m)){const u=o[f];let h=u;p&&!Be(u)?h=[]:!p&&!Ft(u)&&(h={}),o[f]=Y(h,m)}else o[f]=p?m.slice():m})}),o},On=(o,t)=>X(Y({},o),(n,s,r)=>{n===void 0?delete r[s]:n&&Ft(n)&&(r[s]=On(n))}),Mo=o=>{for(const t in o)return!1;return!0},ho=(o,t,n)=>At(o,Hr(t,n)),Xe=o=>Ke(new Set((Be(o)?o:(o||"").split(" ")).filter(t=>t))),Ao=(o,t)=>o&&o.getAttribute(t),rn=(o,t)=>o&&o.hasAttribute(t),Ae=(o,t,n)=>{X(Xe(t),s=>{o&&o.setAttribute(s,String(n||""))})},Ne=(o,t)=>{X(Xe(t),n=>o&&o.removeAttribute(n))},Wt=(o,t)=>{const n=Xe(Ao(o,t)),s=U(Ae,o,t),r=(c,l)=>{const i=new Set(n);return X(Xe(c),a=>{i[l](a)}),Ke(i).join(" ")};return{O:c=>s(r(c,"delete")),$:c=>s(r(c,"add")),C:c=>{const l=Xe(c);return l.reduce((i,a)=>i&&n.includes(a),l.length>0)}}},Lo=(o,t,n)=>(Wt(o,t).O(n),U(Oo,o,t,n)),Oo=(o,t,n)=>(Wt(o,t).$(n),U(Lo,o,t,n)),vo=(o,t,n,s)=>(s?Oo:Lo)(o,t,n),Fo=(o,t,n)=>Wt(o,t).C(n),Fn=o=>Wt(o,"class"),Hn=(o,t)=>{Fn(o).O(t)},Yt=(o,t)=>(Fn(o).$(t),U(Hn,o,t)),Rn=(o,t)=>{const n=[],s=t?Gt(t)&&t:document;return s?se(n,s.querySelectorAll(o)):n},Ur=(o,t)=>{const n=t?Gt(t)&&t:document;return n?n.querySelector(o):null},Rt=(o,t)=>Gt(o)?o.matches(t):!1,zn=o=>Rt(o,"body"),go=o=>o?Ke(o.childNodes):[],at=o=>o&&o.parentElement,nt=(o,t)=>Gt(o)&&o.closest(t),ko=o=>document.activeElement,Pr=(o,t,n)=>{const s=nt(o,t),r=o&&Ur(n,s),c=nt(r,t)===s;return s&&r?s===o||r===o||c&&nt(nt(o,n),t)!==s:!1},qe=o=>{if(qt(o))X(Ke(o),t=>qe(t));else if(o){const t=at(o);t&&t.removeChild(o)}},jn=(o,t,n)=>{if(n&&o){let s=t,r;return qt(n)?(r=document.createDocumentFragment(),X(n,c=>{c===s&&(s=c.previousSibling),r.appendChild(c)})):r=n,t&&(s?s!==t&&(s=s.nextSibling):s=o.firstChild),o.insertBefore(r,s||null),()=>qe(n)}return $e},pe=(o,t)=>jn(o,null,t),sn=(o,t)=>jn(at(o),o&&o.nextSibling,t),rt=o=>{const t=document.createElement("div");return Ae(t,"class",o),t},Ho=o=>{const t=rt();return t.innerHTML=o.trim(),X(go(t),n=>qe(n))},qr=/^--/,an=(o,t)=>o.getPropertyValue(t)||o[t]||"",Ro=o=>{const t=o||0;return isFinite(t)?t:0},St=o=>Ro(parseFloat(o||"")),ln=o=>`${(Ro(o)*100).toFixed(3)}%`,yo=o=>`${Ro(o)}px`;function Fe(o,t){o&&t&&X(t,(n,s)=>{try{const r=o.style,c=Se(n)?yo(n):(n||"")+"";qr.test(s)?r.setProperty(s,c):r[s]=c}catch{}})}function He(o,t,n){const s=Pt(t);let r=s?"":{};if(o){const c=he.getComputedStyle(o,n)||o.style;r=s?an(c,t):Ke(t).reduce((l,i)=>(l[i]=an(c,i),l),r)}return r}const cn=(o,t,n)=>{const s=t?`${t}-`:"",r=n?`-${n}`:"",c=`${s}top${r}`,l=`${s}right${r}`,i=`${s}bottom${r}`,a=`${s}left${r}`,d=He(o,[c,l,i,a]);return{t:St(d[c]),r:St(d[l]),b:St(d[i]),l:St(d[a])}},ro=(o,t)=>`translate${gt(o)?`(${o.x},${o.y})`:`${t?"X":"Y"}(${o})`}`,Gr=o=>!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length),Kr={w:0,h:0},Xt=(o,t)=>t?{w:t[`${o}Width`],h:t[`${o}Height`]}:Kr,Wr=o=>Xt("inner",o||he),Je=U(Xt,"offset"),In=U(Xt,"client"),xo=U(Xt,"scroll"),zo=o=>{const t=parseFloat(He(o,Pe))||0,n=parseFloat(He(o,Qe))||0;return{w:t-io(t),h:n-io(n)}},ht=o=>o.getBoundingClientRect(),Yr=o=>!!o&&Gr(o),_o=o=>!!(o&&(o[Qe]||o[Pe])),Un=(o,t)=>{const n=_o(o);return!_o(t)&&n},dn=(o,t,n,s)=>{X(Xe(t),r=>{o&&o.removeEventListener(r,n,s)})},te=(o,t,n,s)=>{var r;const c=(r=s&&s.H)!=null?r:!0,l=s&&s.I||!1,i=s&&s.A||!1,a={passive:c,capture:l};return U(Ee,Xe(t).map(d=>{const f=i?m=>{dn(o,d,f,l),n&&n(m)}:n;return o&&o.addEventListener(d,f,a),U(dn,o,d,f,l)}))},jo=o=>o.stopPropagation(),wo=o=>o.preventDefault(),Pn=o=>jo(o)||wo(o),be=(o,t)=>{const{x:n,y:s}=Se(t)?{x:t,y:t}:t||{};Se(n)&&(o.scrollLeft=n),Se(s)&&(o.scrollTop=s)},ye=o=>({x:o.scrollLeft,y:o.scrollTop}),qn=()=>({T:{x:0,y:0},D:{x:0,y:0}}),Xr=(o,t)=>{const{T:n,D:s}=o,{w:r,h:c}=t,l=(m,p,u)=>{let h=en(m)*u,k=en(p)*u;if(h===k){const v=Lt(m),x=Lt(p);k=v>x?0:k,h=v<x?0:h}return h=h===k?0:h,[h+0,k+0]},[i,a]=l(n.x,s.x,r),[d,f]=l(n.y,s.y,c);return{T:{x:i,y:d},D:{x:a,y:f}}},un=({T:o,D:t})=>{const n=(s,r)=>s===0&&s<=r;return{x:n(o.x,t.x),y:n(o.y,t.y)}},mn=({T:o,D:t},n)=>{const s=(r,c,l)=>ho(0,1,(r-l)/(r-c)||0);return{x:s(o.x,t.x,n.x),y:s(o.y,t.y,n.y)}},bo=o=>{o&&o.focus&&o.focus({preventScroll:!0})},fn=(o,t)=>{X(Tn(t),o)},Eo=o=>{const t=new Map,n=(c,l)=>{if(c){const i=t.get(c);fn(a=>{i&&i[a?"delete":"clear"](a)},l)}else t.forEach(i=>{i.clear()}),t.clear()},s=(c,l)=>{if(Pt(c)){const d=t.get(c)||new Set;return t.set(c,d),fn(f=>{xe(f)&&d.add(f)},l),U(n,c,l)}Dn(l)&&l&&n();const i=Ce(c),a=[];return X(i,d=>{const f=c[d];f&&se(a,s(d,f))}),U(Ee,a)},r=(c,l)=>{X(Ke(t.get(c)),i=>{l&&!fo(l)?i.apply(0,l):i()})};return s(o||{}),[s,n,r]},pn=o=>JSON.stringify(o,(t,n)=>{if(xe(n))throw 0;return n}),hn=(o,t)=>o?`${t}`.split(".").reduce((n,s)=>n&&Ln(n,s)?n[s]:void 0,o):void 0,Jr={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Gn=(o,t)=>{const n={},s=Oe(Ce(t),Ce(o));return X(s,r=>{const c=o[r],l=t[r];if(gt(c)&&gt(l))Y(n[r]={},Gn(c,l)),Mo(n[r])&&delete n[r];else if(Ln(t,r)&&l!==c){let i=!0;if(Be(c)||Be(l))try{pn(c)===pn(l)&&(i=!1)}catch{}i&&(n[r]=l)}}),n},vn=(o,t,n)=>s=>[hn(o,s),n||hn(t,s)!==void 0],lt="data-overlayscrollbars",Dt="os-environment",$t=`${Dt}-scrollbar-hidden`,so=`${lt}-initialize`,Tt="noClipping",gn=`${lt}-body`,Ue=lt,Qr="host",Le=`${lt}-viewport`,Zr=Mn,es=An,Kn="arrange",Wn="measuring",Yn="scrollbarHidden",ts="scrollbarPressed",os="noContent",Vo=`${lt}-padding`,kn=`${lt}-content`,Io="os-size-observer",ns=`${Io}-appear`,Uo=`${Io}-listener`,rs=`${Uo}-scroll`,Mt=`${Uo}-item`,yn=`${Mt}-final`,ss="os-trinsic-observer",as="os-theme-none",_e="os-scrollbar",ls=`${_e}-rtl`,cs=`${_e}-horizontal`,is=`${_e}-vertical`,Xn=`${_e}-track`,Po=`${_e}-handle`,ds=`${_e}-visible`,us=`${_e}-cornerless`,xn=`${_e}-interaction`,_n=`${_e}-unusable`,No=`${_e}-auto-hide`,wn=`${No}-hidden`,bn=`${_e}-wheel`,ms=`${Xn}-interactive`,fs=`${Po}-interactive`;let ao;const ps=()=>{const o=(g,C,D)=>{pe(document.body,g),pe(document.body,g);const A=In(g),S=Je(g),N=zo(C);return D&&qe(g),{x:S.h-A.h+N.h,y:S.w-A.w+N.w}},t=g=>{let C=!1;const D=Yt(g,$t);try{C=He(g,"scrollbar-width")==="none"||He(g,"display","::-webkit-scrollbar")==="none"}catch{}return D(),C},n=`.${Dt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Dt} div{width:200%;height:200%;margin:10px 0}.${$t}{scrollbar-width:none!important}.${$t}::-webkit-scrollbar,.${$t}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=Ho(`<div class="${Dt}"><div></div><style>${n}</style></div>`)[0],c=r.firstChild,[l,,i]=Eo(),[a,d]=ke({o:o(r,c),i:Ct},U(o,r,c,!0)),[f]=d(),m=t(r),p={x:f.x===0,y:f.y===0},u={elements:{host:null,padding:!m,viewport:g=>m&&zn(g)&&g,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},h=Y({},Jr),k=U(Y,{},h),v=U(Y,{},u),x={k:f,M:p,R:m,V:!!mo,L:U(l,"r"),P:v,U:g=>Y(u,g)&&v(),N:k,q:g=>Y(h,g)&&k(),B:Y({},u),F:Y({},h)};if(Ne(r,"style"),qe(r),te(he,"resize",()=>{i("r",[])}),xe(he.matchMedia)&&!m&&(!p.x||!p.y)){const g=C=>{const D=he.matchMedia(`(resolution: ${he.devicePixelRatio}dppx)`);te(D,"change",()=>{C(),g(C)},{A:!0})};g(()=>{const[C,D]=a();Y(x.k,C),i("r",[D])})}return x},De=()=>(ao||(ao=ps()),ao),Jn=(o,t)=>xe(t)?t.apply(0,o):t,hs=(o,t,n,s)=>{const r=Ut(s)?n:s;return Jn(o,r)||t.apply(0,o)},Qn=(o,t,n,s)=>{const r=Ut(s)?n:s,c=Jn(o,r);return!!c&&(Ht(c)?c:t.apply(0,o))},vs=(o,t)=>{const{nativeScrollbarsOverlaid:n,body:s}=t||{},{M:r,R:c,P:l}=De(),{nativeScrollbarsOverlaid:i,body:a}=l().cancel,d=n??i,f=Ut(s)?a:s,m=(r.x||r.y)&&d,p=o&&(Bo(f)?!c:f);return!!m||!!p},qo=new WeakMap,gs=(o,t)=>{qo.set(o,t)},ks=o=>{qo.delete(o)},Zn=o=>qo.get(o),ys=(o,t,n)=>{let s=!1;const r=n?new WeakMap:!1,c=()=>{s=!0},l=i=>{if(r&&n){const a=n.map(d=>{const[f,m]=d||[];return[m&&f?(i||Rn)(f,o):[],m]});X(a,d=>X(d[0],f=>{const m=d[1],p=r.get(f)||[];if(o.contains(f)&&m){const h=te(f,m,k=>{s?(h(),r.delete(f)):t(k)});r.set(f,se(p,h))}else Ee(p),r.delete(f)}))}};return l(),[c,l]},En=(o,t,n,s)=>{let r=!1;const{j:c,X:l,Y:i,W:a,J:d,K:f}=s||{},m=po(()=>r&&n(!0),{_:33,p:99}),[p,u]=ys(o,m,i),h=c||[],k=l||[],v=Oe(h,k),x=(C,D)=>{if(!fo(D)){const A=d||$e,S=f||$e,N=[],$=[];let E=!1,w=!1;if(X(D,_=>{const{attributeName:V,target:b,type:y,oldValue:M,addedNodes:T,removedNodes:K}=_,Z=y==="attributes",J=y==="childList",L=o===b,q=Z&&V,G=q&&Ao(b,V||""),I=Pt(G)?G:null,ee=q&&M!==I,F=Co(k,V)&&ee;if(t&&(J||!L)){const R=Z&&ee,H=R&&a&&Rt(b,a),O=(H?!A(b,V,M,I):!Z||R)&&!S(_,!!H,o,s);X(T,z=>se(N,z)),X(K,z=>se(N,z)),w=w||O}!t&&L&&ee&&!A(b,V,M,I)&&(se($,V),E=E||F)}),u(_=>nn(N).reduce((V,b)=>(se(V,Rn(_,b)),Rt(b,_)?se(V,b):V),[])),t)return!C&&w&&n(!1),[!1];if(!fo($)||E){const _=[nn($),E];return!C&&n.apply(0,_),_}}},g=new Rr(U(x,!1));return[()=>(g.observe(o,{attributes:!0,attributeOldValue:!0,attributeFilter:v,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(p(),g.disconnect(),r=!1)}),()=>{if(r)return m.S(),x(!0,g.takeRecords())}]},er={},tr={},xs=o=>{X(o,t=>X(t,(n,s)=>{er[s]=t[s]}))},or=(o,t,n)=>Ce(o).map(s=>{const{static:r,instance:c}=o[s],[l,i,a]=n||[],d=n?c:r;if(d){const f=n?d(l,i,t):d(t);return(a||tr)[s]=f}}),kt=o=>tr[o],_s="__osOptionsValidationPlugin",nr="__osSizeObserverPlugin",ws={[nr]:{static:()=>(o,t,n)=>{const r="scroll",c=Ho(`<div class="${Mt}" dir="ltr"><div class="${Mt}"><div class="${yn}"></div></div><div class="${Mt}"><div class="${yn}" style="width: 200%; height: 200%"></div></div></div>`),l=c[0],i=l.lastChild,a=l.firstChild,d=a==null?void 0:a.firstChild;let f=Je(l),m=f,p=!1,u;const h=()=>{be(a,3333333),be(i,3333333)},k=g=>{u=0,p&&(f=m,t(g===!0))},v=g=>{m=Je(l),p=!g||!To(m,f),g?(jo(g),p&&!u&&(jt(u),u=st(k))):k(g===!1),h()},x=[pe(o,c),te(a,r,v),te(i,r,v)];return Yt(o,rs),Fe(d,{[Pe]:3333333,[Qe]:3333333}),st(h),[n?U(v,!1):h,x]}}},rr=(o,t)=>{const{M:n}=t,[s,r]=o("showNativeOverlaidScrollbars");return[s&&n.x&&n.y,r]},zt=o=>o.indexOf(Ie)===0,bs=(o,t)=>{const n=(r,c,l,i)=>{const a=r===Ie?We:r.replace(`${Ie}-`,""),d=zt(r),f=zt(l);return!c&&!i?We:d&&f?Ie:d?c&&i?a:c?Ie:We:c?a:f&&i?Ie:We},s={x:n(t.x,o.x,t.y,o.y),y:n(t.y,o.y,t.x,o.x)};return{G:s,Z:{x:s.x===Ze,y:s.y===Ze}}},Go="__osScrollbarsHidingPlugin",Es={[Go]:{static:()=>({tt:(o,t,n,s,r)=>{const{nt:c,ot:l}=o,{R:i,M:a,k:d}=s,f=!c&&!i&&(a.x||a.y),[m]=rr(r,s),p=()=>{const x=S=>{const N=He(l,S);return[N,N===Ze]},[g,C]=x(Mn),[D,A]=x(An);return{G:{x:g,y:D},Z:{x:C,y:A}}},u=x=>{const{Z:g}=x,C=i||m?0:42,D=(E,w,_)=>[w&&!i?E?C:_:0,E&&!!C],[A,S]=D(a.x,g.x,d.x),[N,$]=D(a.y,g.y,d.y);return{st:{x:A,y:N},et:{x:S,y:$}}},h=(x,{ct:g},C)=>{if(!c){const D=Y({},{[pt]:0,[ot]:0,[ft]:0}),{st:A,et:S}=u(x),{x:N,y:$}=S,{x:E,y:w}=A,{rt:_}=t,V=g?ft:pt,b=g?ut:dt,y=_[V],M=_[ot],T=_[b],K=_[mt];return D[Pe]=`calc(100% + ${w+y*-1}px)`,D[V]=-w+y,D[ot]=-E+M,C&&(D[b]=T+($?w:0),D[mt]=K+(N?E:0)),D}};return{lt:u,it:(x,g,C)=>{if(f){const{rt:D}=t,{st:A,et:S}=u(x),{x:N,y:$}=S,{x:E,y:w}=A,{ct:_}=n,b=D[_?dt:ut],y=D.paddingTop,M=g.w+C.w,T=g.h+C.h,K={w:w&&$?`${w+M-b}px`:"",h:E&&N?`${E+T-y}px`:""};Fe(l,{"--os-vaw":K.w,"--os-vah":K.h})}return f},ut:x=>{if(f){const g=x||p(),{rt:C}=t,{et:D}=u(g),{x:A,y:S}=D,N={},$=_=>X(_,V=>{N[V]=C[V]});A&&$([ot,Do,mt]),S&&$([ft,pt,ut,dt]);const E=He(l,Ce(N)),w=Lo(l,Le,Kn);return Fe(l,N),[()=>{Fe(l,Y({},E,h(g,n,f))),w()},g]}return[$e]},_t:h}}})}},sr="__osClickScrollPlugin",Vs={[sr]:{static:()=>(o,t,n,s,r)=>{let c=0,l=$e;const i=a=>{l=zr(a,a+s*Math.sign(n),133,(d,f,m)=>{o(d);const p=t(),u=p+s,h=r>=p&&r<=u;if(m&&!h){if(c)i(d);else{const k=vt(()=>{i(d)},222);l=()=>{clearTimeout(k)}}c++}})};return i(0),()=>l()}}},ar=(o,t,n)=>{const{dt:s}=n||{},r=kt(nr),[c]=ke({o:!1,u:!0});return()=>{const l=[],a=Ho(`<div class="${Io}"><div class="${Uo}"></div></div>`)[0],d=a.firstChild,f=m=>{const p=m instanceof ResizeObserverEntry;let u=!1,h=!1;if(p){const[k,,v]=c(m.contentRect),x=_o(k);h=Un(k,v),u=!h&&!x}else h=m===!0;u||t({ft:!0,dt:h})};if(Ot){const m=new Ot(p=>f(p.pop()));m.observe(d),se(l,()=>{m.disconnect()})}else if(r){const[m,p]=r(d,f,s);se(l,Oe([Yt(a,ns),te(a,"animationstart",m)],p))}else return $e;return U(Ee,se(l,pe(o,a)))}},Ns=(o,t)=>{let n;const s=a=>a.h===0||a.isIntersecting||a.intersectionRatio>0,r=rt(ss),[c]=ke({o:!1}),l=(a,d)=>{if(a){const f=c(s(a)),[,m]=f;return m&&!d&&t(f)&&[f]}},i=(a,d)=>l(d.pop(),a);return[()=>{const a=[];if(tn)n=new tn(U(i,!1),{root:o}),n.observe(r),se(a,()=>{n.disconnect()});else{const d=()=>{const f=Je(r);l(f)};se(a,ar(r,d)()),d()}return U(Ee,se(a,pe(o,r)))},()=>n&&i(!0,n.takeRecords())]},Ss=(o,t,n,s)=>{let r,c,l,i,a,d;const f=`[${Ue}]`,m=`[${Le}]`,p=[],u=["wrap","cols","rows"],h=["id","class","style","open"],{vt:k,ht:v,ot:x,gt:g,bt:C,wt:D,nt:A,yt:S,St:N,Ot:$}=o,E=B=>He(B,"direction")==="rtl",w={$t:!1,ct:E(k)},_=De(),V=kt(Go),[b]=ke({i:To,o:{w:0,h:0}},()=>{const B=V&&V.tt(o,t,w,_,n).ut,z=!(S&&A)&&Fo(v,Ue,Tt),j=!A&&N(Kn),P=j&&ye(g),Q=$(Wn,z),le=j&&B&&B()[0],de=xo(x),W=zo(x);return le&&le(),be(g,P),z&&Q(),{w:de.w+W.w,h:de.h+W.h}}),y=D?u:Oe(h,u),M=po(s,{_:()=>r,p:()=>c,m(B,O){const[z]=B,[j]=O;return[Oe(Ce(z),Ce(j)).reduce((P,Q)=>(P[Q]=z[Q]||j[Q],P),{})]}}),T=B=>{const O=E(k);Y(B,{Ct:d!==O}),Y(w,{ct:O}),d=O},K=(B,O)=>{const[z,j]=B,P={xt:j};return Y(w,{$t:z}),!O&&s(P),P},Z=({ft:B,dt:O})=>{const j=!(B&&!O)&&_.R?M:s,P={ft:B||O,dt:O};T(P),j(P)},J=(B,O)=>{const[,z]=b(),j={Ht:z};return T(j),z&&!O&&(B?s:M)(j),j},L=(B,O,z)=>{const j={Et:O};return T(j),O&&!z&&M(j),j},[q,G]=C?Ns(v,K):[],I=!A&&ar(v,Z,{dt:!0}),[ee,F]=En(v,!1,L,{X:h,j:Oe(h,p)}),R=A&&Ot&&new Ot(B=>{const O=B[B.length-1].contentRect;Z({ft:!0,dt:Un(O,a)}),a=O}),H=po(()=>{const[,B]=b();s({Ht:B})},{_:222,v:!0});return[()=>{R&&R.observe(v);const B=I&&I(),O=q&&q(),z=ee(),j=_.L(P=>{P?M({zt:P}):H()});return()=>{R&&R.disconnect(),B&&B(),O&&O(),i&&i(),z(),j()}},({It:B,At:O,Tt:z})=>{const j={},[P]=B("update.ignoreMutation"),[Q,le]=B("update.attributes"),[de,W]=B("update.elementEvents"),[ce,ue]=B("update.debounce"),we=W||le,ie=O||z,ve=ae=>xe(P)&&P(ae);if(we){l&&l(),i&&i();const[ae,ne]=En(C||x,!0,J,{j:Oe(y,Q||[]),Y:de,W:f,K:(me,re)=>{const{target:fe,attributeName:ge}=me;return(!re&&ge&&!A?Pr(fe,f,m):!1)||!!nt(fe,`.${_e}`)||!!ve(me)}});i=ae(),l=ne}if(ue)if(M.S(),Be(ce)){const ae=ce[0],ne=ce[1];r=Se(ae)&&ae,c=Se(ne)&&ne}else Se(ce)?(r=ce,c=!1):(r=!1,c=!1);if(ie){const ae=F(),ne=G&&G(),me=l&&l();ae&&Y(j,L(ae[0],ae[1],ie)),ne&&Y(j,K(ne[0],ie)),me&&Y(j,J(me[0],ie))}return T(j),j},w]},$s=(o,t,n,s)=>{const{P:r}=De(),{scrollbars:c}=r(),{slot:l}=c,{vt:i,ht:a,ot:d,Dt:f,gt:m,yt:p,nt:u}=t,{scrollbars:h}=f?{}:o,{slot:k}=h||{},v=new Map,x=F=>mo&&new mo({source:m,axis:F}),g={x:x("x"),y:x("y")},C=Qn([i,a,d],()=>u&&p?i:a,l,k),D=(F,R)=>{if(R){const P=F?Pe:Qe,{kt:Q,Mt:le}=R,de=ht(le)[P],W=ht(Q)[P];return ho(0,1,de/W||0)}const H=F?"x":"y",{Rt:B,Vt:O}=n,z=O[H],j=B[H];return ho(0,1,z/(z+j)||0)},A=(F,R,H)=>{const B=D(H,F);return 1/B*(1-B)*R},S=F=>Y(F,{clear:["left"]}),N=F=>{v.forEach((R,H)=>{(F?Co(Tn(F),H):!0)&&(X(R||[],O=>{O&&O.cancel()}),v.delete(H))})},$=(F,R,H,B)=>{const O=v.get(F)||[],z=O.find(j=>j&&j.timeline===R);z?z.effect=new KeyframeEffect(F,H,{composite:B}):v.set(F,Oe(O,[F.animate(H,{timeline:R,composite:B})]))},E=(F,R,H)=>{const B=H?Yt:Hn;X(F,O=>{B(O.Lt,R)})},w=(F,R)=>{X(F,H=>{const[B,O]=R(H);Fe(B,O)})},_=(F,R)=>{w(F,H=>{const{Mt:B}=H;return[B,{[R?Pe:Qe]:ln(D(R))}]})},V=(F,R)=>{const{Pt:H}=n,B=R?"x":"y",O=g[B],z=un(H)[B],j=(P,Q)=>ro(ln(A(P,z?Q:1-Q,R)),R);O?X(F,P=>{const{Mt:Q}=P;$(Q,O,S({transform:[0,1].map(le=>j(P,le))}))}):w(F,P=>[P.Mt,{transform:j(P,mn(H,ye(m))[B])}])},b=F=>u&&!p&&at(F)===d,y=[],M=[],T=[],K=(F,R,H)=>{const B=Dn(H),O=B?H:!0,z=B?!H:!0;O&&E(M,F,R),z&&E(T,F,R)},Z=()=>{_(M,!0),_(T)},J=()=>{V(M,!0),V(T)},L=()=>{if(u){const{Rt:F,Pt:R}=n,H=un(R),B=.5;if(g.x&&g.y)X(Oe(T,M),({Lt:O})=>{if(b(O)){const z=j=>$(O,g[j],S({transform:[0,H[j]?1:-1].map(P=>ro(yo(P*(F[j]-B)),j==="x"))}),"add");z("x"),z("y")}else N(O)});else{const O=mn(R,ye(m)),z=j=>{const{Lt:P}=j,Q=b(P)&&P,le=(de,W,ce)=>{const ue=W*de;return yo(ce?ue:-ue)};return[Q,Q&&{transform:ro({x:le(O.x,F.x,H.x),y:le(O.y,F.y,H.y)})}]};w(M,z),w(T,z)}}},q=F=>{const H=rt(`${_e} ${F?cs:is}`),B=rt(Xn),O=rt(Po),z={Lt:H,kt:B,Mt:O};return se(F?M:T,z),se(y,[pe(H,B),pe(B,O),U(qe,H),N,s(z,K,V,F)]),z},G=U(q,!0),I=U(q,!1),ee=()=>(pe(C,M[0].Lt),pe(C,T[0].Lt),U(Ee,y));return G(),I(),[{Ut:Z,Nt:J,qt:L,Bt:K,Ft:{V:g.x,jt:M,Xt:G,Yt:U(w,M)},Wt:{V:g.y,jt:T,Xt:I,Yt:U(w,T)}},ee]},Bs=(o,t,n,s)=>(r,c,l,i)=>{const{ht:a,ot:d,nt:f,gt:m,Jt:p,Ot:u}=t,{Lt:h,kt:k,Mt:v}=r,[x,g]=Ye(333),[C,D]=Ye(444),[A,S]=Ye(),N=U(l,[r],i),$=b=>{xe(m.scrollBy)&&m.scrollBy({behavior:"smooth",left:b.x,top:b.y})},E=i?Pe:Qe,w=()=>{const b="pointerup pointercancel lostpointercapture",y=`client${i?"X":"Y"}`,M=i?"left":"top",T=i?"w":"h",K=i?"x":"y",Z=(J,L)=>q=>{const{Rt:G}=n,I=Je(k)[T]-Je(v)[T],F=L*q/I*G[K];be(m,{[K]:J+F})};return te(k,"pointerdown",J=>{const L=nt(J.target,`.${Po}`)===v,q=L?v:k,G=o.scrollbars,{button:I,isPrimary:ee,pointerType:F}=J,{pointers:R}=G;if(I===0&&ee&&G[L?"dragScroll":"clickScroll"]&&(R||[]).includes(F)){D();const B=!L&&J.shiftKey,O=U(ht,v),z=U(ht,k),j=(re,fe)=>(re||O())[M]-(fe||z())[M],P=io(ht(m)[E])/Je(m)[T]||1,Q=Z(ye(m)[K],1/P),le=J[y],de=O(),W=z(),ce=de[E],ue=j(de,W)+ce/2,we=le-W[M],ie=L?0:we-ue,ve=re=>{Ee(me),q.releasePointerCapture(re.pointerId)},ae=()=>u(ts,!0),ne=ae(),me=[()=>{const re=ye(m);ne();const fe=ye(m),ge={x:fe.x-re.x,y:fe.y-re.y};(Lt(ge.x)>3||Lt(ge.y)>3)&&(ae(),be(m,re),$(ge),C(ne))},te(p,b,ve),te(p,"selectstart",re=>wo(re),{H:!1}),te(k,b,ve),te(k,"pointermove",re=>{const fe=re[y]-le;(L||B)&&Q(ie+fe)})];if(q.setPointerCapture(J.pointerId),B)Q(ie);else if(!L){const re=kt(sr);re&&se(me,re(Q,j,ie,ce,we))}}})};let _=!0;const V=b=>b.propertyName.indexOf(E)>-1;return U(Ee,[te(v,"pointermove pointerleave",s),te(h,"pointerenter",()=>{c(xn,!0)}),te(h,"pointerleave pointercancel",()=>{c(xn,!1)}),!f&&te(h,"mousedown",()=>{const b=ko();(rn(b,Le)||rn(b,Ue)||b===document.body)&&vt(U(bo,d),25)}),te(h,"wheel",b=>{const{deltaX:y,deltaY:M,deltaMode:T}=b;_&&T===0&&at(h)===a&&$({x:y,y:M}),_=!1,c(bn,!0),x(()=>{_=!0,c(bn)}),wo(b)},{H:!1,I:!0}),te(v,"transitionstart",b=>{if(V(b)){const y=()=>{N(),A(y)};y()}}),te(v,"transitionend transitioncancel",b=>{V(b)&&(S(),N())}),te(h,"pointerdown",U(te,p,"click",Pn,{A:!0,I:!0,H:!1}),{I:!0}),w(),g,D,S])},Cs=(o,t,n,s,r,c)=>{let l,i,a,d,f,m=$e,p=0;const u=L=>L.pointerType==="mouse",[h,k]=Ye(),[v,x]=Ye(100),[g,C]=Ye(100),[D,A]=Ye(()=>p),[S,N]=$s(o,r,s,Bs(t,r,s,L=>u(L)&&T())),{ht:$,Kt:E,yt:w}=r,{Bt:_,Ut:V,Nt:b,qt:y}=S,M=(L,q)=>{if(A(),L)_(wn);else{const G=U(_,wn,!0);p>0&&!q?D(G):G()}},T=()=>{(a?!l:!d)&&(M(!0),v(()=>{M(!1)}))},K=L=>{_(No,L,!0),_(No,L,!1)},Z=L=>{u(L)&&(l=a,a&&M(!0))},J=[A,x,C,k,()=>m(),te($,"pointerover",Z,{A:!0}),te($,"pointerenter",Z),te($,"pointerleave",L=>{u(L)&&(l=!1,a&&M(!1))}),te($,"pointermove",L=>{u(L)&&i&&T()}),te(E,"scroll",L=>{h(()=>{b(),T()}),c(L),y()})];return[()=>U(Ee,se(J,N())),({It:L,Tt:q,Gt:G,Qt:I})=>{const{Zt:ee,tn:F,nn:R,sn:H}=I||{},{Ct:B,dt:O}=G||{},{ct:z}=n,{M:j}=De(),{G:P,en:Q}=s,[le,de]=L("showNativeOverlaidScrollbars"),[W,ce]=L("scrollbars.theme"),[ue,we]=L("scrollbars.visibility"),[ie,ve]=L("scrollbars.autoHide"),[ae,ne]=L("scrollbars.autoHideSuspend"),[me]=L("scrollbars.autoHideDelay"),[re,fe]=L("scrollbars.dragScroll"),[ge,et]=L("scrollbars.clickScroll"),[yt,Qt]=L("overflow"),Zt=O&&!q,eo=Q.x||Q.y,Ve=ee||F||H||B||q,to=R||we||Qt,xt=le&&j.x&&j.y,_t=(Re,ct,it)=>{const wt=Re.includes(Ze)&&(ue===Ie||ue==="auto"&&ct===Ze);return _(ds,wt,it),wt};if(p=me,Zt&&(ae&&eo?(K(!1),m(),g(()=>{m=te(E,"scroll",U(K,!0),{A:!0})})):K(!0)),de&&_(as,xt),ce&&(_(f),_(W,!0),f=W),ne&&!ae&&K(!0),ve&&(i=ie==="move",a=ie==="leave",d=ie==="never",M(d,!0)),fe&&_(fs,re),et&&_(ms,ge),to){const Re=_t(yt.x,P.x,!0),ct=_t(yt.y,P.y,!1);_(us,!(Re&&ct))}Ve&&(V(),b(),y(),_(_n,!Q.x,!0),_(_n,!Q.y,!1),_(ls,z&&!w))},{},S]},Ds=o=>{const t=De(),{P:n,R:s}=t,{elements:r}=n(),{host:c,padding:l,viewport:i,content:a}=r,d=Ht(o),f=d?{}:o,{elements:m}=f,{host:p,padding:u,viewport:h,content:k}=m||{},v=d?o:f.target,x=zn(v),g=Rt(v,"textarea"),C=v.ownerDocument,D=C.documentElement,A=()=>C.defaultView||he,S=U(hs,[v]),N=U(Qn,[v]),$=U(rt,""),E=U(S,$,i),w=U(N,$,a),_=E(h),V=_===v,b=V&&x,y=!V&&w(k),M=!V&&_===y,T=b?D:_,K=g?S($,c,p):v,Z=b?T:K,J=!V&&N($,l,u),L=!M&&y,q=[L,T,J,Z].map(W=>Ht(W)&&!at(W)&&W),G=W=>W&&Co(q,W),I=G(T)?v:T,ee={vt:v,ht:Z,ot:T,cn:J,bt:L,gt:b?D:T,Kt:b?C:T,rn:x?D:I,Jt:C,wt:g,yt:x,Dt:d,nt:V,ln:A,St:W=>Fo(T,Le,W),Ot:(W,ce)=>vo(T,Le,W,ce)},{vt:F,ht:R,cn:H,ot:B,bt:O}=ee,z=[()=>{Ne(R,[Ue,so]),Ne(F,so),x&&Ne(D,[so,Ue])}],j=g&&G(R);let P=g?F:go([O,B,H,R,F].find(W=>W&&!G(W)));const Q=b?F:O||B,le=U(Ee,z);return[ee,()=>{const W=A(),ce=ko(),ue=ne=>{pe(at(ne),go(ne)),qe(ne)},we=ne=>te(ne,"focusin focusout focus blur",Pn,{I:!0,H:!1}),ie="tabindex",ve=Ao(B,ie),ae=we(ce);return Ae(R,Ue,V?"":Qr),Ae(H,Vo,""),Ae(B,Le,""),Ae(O,kn,""),V||(Ae(B,ie,ve||"-1"),x&&Ae(D,gn,"")),j&&(sn(F,R),se(z,()=>{sn(R,F),qe(R)})),pe(Q,P),pe(R,H),pe(H||R,!V&&B),pe(B,O),se(z,[ae,()=>{const ne=ko(),me=G(B),re=me&&ne===B?F:ne,fe=we(re);Ne(H,Vo),Ne(O,kn),Ne(B,Le),x&&Ne(D,gn),ve?Ae(B,ie,ve):Ne(B,ie),G(O)&&ue(O),me&&ue(B),G(H)&&ue(H),bo(re),fe()}]),s&&!V&&(Oo(B,Le,Yn),se(z,U(Ne,B,Le))),bo(!V&&x&&ce===F&&W.top===W?B:ce),ae(),P=0,le},le]},Ts=({bt:o})=>({Gt:t,an:n,Tt:s})=>{const{xt:r}=t||{},{$t:c}=n;o&&(r||s)&&Fe(o,{[Qe]:c&&"100%"})},Ms=({ht:o,cn:t,ot:n,nt:s},r)=>{const[c,l]=ke({i:Ir,o:cn()},U(cn,o,"padding",""));return({It:i,Gt:a,an:d,Tt:f})=>{let[m,p]=l(f);const{R:u}=De(),{ft:h,Ht:k,Ct:v}=a||{},{ct:x}=d,[g,C]=i("paddingAbsolute");(h||p||(f||k))&&([m,p]=c(f));const A=!s&&(C||v||p);if(A){const S=!g||!t&&!u,N=m.r+m.l,$=m.t+m.b,E={[pt]:S&&!x?-N:0,[ot]:S?-$:0,[ft]:S&&x?-N:0,top:S?-m.t:0,right:S?x?-m.r:"auto":0,left:S?x?"auto":-m.l:0,[Pe]:S&&`calc(100% + ${N}px)`},w={[Do]:S?m.t:0,[dt]:S?m.r:0,[mt]:S?m.b:0,[ut]:S?m.l:0};Fe(t||n,E),Fe(n,w),Y(r,{cn:m,un:!S,rt:t?w:Y({},E,w)})}return{_n:A}}},As=(o,t)=>{const n=De(),{ht:s,cn:r,ot:c,nt:l,Kt:i,gt:a,yt:d,Ot:f,ln:m}=o,{R:p}=n,u=d&&l,h=U(At,0),k=["display","direction","flexDirection","writingMode"],v={i:To,o:{w:0,h:0}},x={i:Ct,o:{}},g=L=>{f(Wn,!u&&L)},C=(L,q)=>{const G=he.devicePixelRatio%1!==0?1:0,I={w:h(L.w-q.w),h:h(L.h-q.h)};return{w:I.w>G?I.w:0,h:I.h>G?I.h:0}},[D,A]=ke(v,U(zo,c)),[S,N]=ke(v,U(xo,c)),[$,E]=ke(v),[w]=ke(x),[_,V]=ke(v),[b]=ke(x),[y]=ke({i:(L,q)=>Kt(L,q,k),o:{}},()=>Yr(c)?He(c,k):{}),[M,T]=ke({i:(L,q)=>Ct(L.T,q.T)&&Ct(L.D,q.D),o:qn()},()=>{g(!0);const L=ye(a),q=f(os,!0),G=te(i,Ze,H=>{const B=ye(a);H.isTrusted&&B.x===L.x&&B.y===L.y&&jo(H)},{I:!0,A:!0});be(a,{x:0,y:0}),q();const I=ye(a),ee=xo(a);be(a,{x:ee.w,y:ee.h});const F=ye(a);be(a,{x:F.x-I.x<1&&-ee.w,y:F.y-I.y<1&&-ee.h});const R=ye(a);return be(a,L),st(()=>G()),{T:I,D:R}}),K=kt(Go),Z=(L,q)=>`${q?Zr:es}${jr(L)}`,J=L=>{const q=I=>[Ie,We,Ze].map(ee=>Z(ee,I)),G=q(!0).concat(q()).join(" ");f(G),f(Ce(L).map(I=>Z(L[I],I==="x")).join(" "),!0)};return({It:L,Gt:q,an:G,Tt:I},{_n:ee})=>{const{ft:F,Ht:R,Ct:H,dt:B,zt:O}=q||{},z=K&&K.tt(o,t,G,n,L),{it:j,ut:P,_t:Q}=z||{},[le,de]=rr(L,n),[W,ce]=L("overflow"),ue=zt(W.x),we=zt(W.y),ie=F||ee||R||H||O||de;let ve=A(I),ae=N(I),ne=E(I),me=V(I);if(de&&p&&f(Yn,!le),ie){Fo(s,Ue,Tt)&&g(!0);const[Jo]=P?P():[],[bt]=ve=D(I),[Et]=ae=S(I),Vt=In(c),Nt=u&&Wr(m()),yr={w:h(Et.w+bt.w),h:h(Et.h+bt.h)},Qo={w:h((Nt?Nt.w:Vt.w+h(Vt.w-Et.w))+bt.w),h:h((Nt?Nt.h:Vt.h+h(Vt.h-Et.h))+bt.h)};Jo&&Jo(),me=_(Qo),ne=$(C(yr,Qo),I)}const[re,fe]=me,[ge,et]=ne,[yt,Qt]=ae,[Zt,eo]=ve,[Ve,to]=w({x:ge.w>0,y:ge.h>0}),xt=ue&&we&&(Ve.x||Ve.y)||ue&&Ve.x&&!Ve.y||we&&Ve.y&&!Ve.x,_t=ee||H||O||eo||Qt||fe||et||ce||de||ie,Re=bs(Ve,W),[ct,it]=b(Re.G),[,wt]=y(I),Xo=H||B||wt||to||I,[gr,kr]=Xo?M(I):T();return _t&&(it&&J(Re.G),Q&&j&&Fe(c,Q(Re,G,j(Re,yt,Zt)))),g(!1),vo(s,Ue,Tt,xt),vo(r,Vo,Tt,xt),Y(t,{G:ct,Vt:{x:re.w,y:re.h},Rt:{x:ge.w,y:ge.h},en:Ve,Pt:Xr(gr,ge)}),{nn:it,Zt:fe,tn:et,sn:kr||et,dn:Xo}}},Ls=o=>{const[t,n,s]=Ds(o),r={cn:{t:0,r:0,b:0,l:0},un:!1,rt:{[pt]:0,[ot]:0,[ft]:0,[Do]:0,[dt]:0,[mt]:0,[ut]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},G:{x:We,y:We},en:{x:!1,y:!1},Pt:qn()},{vt:c,gt:l,nt:i}=t,{R:a,M:d}=De(),f=!a&&(d.x||d.y),m=[Ts(t),Ms(t,r),As(t,r)];return[n,p=>{const u={},k=f&&ye(l);return X(m,v=>{Y(u,v(p,u)||{})}),be(l,k),!i&&be(c,0),u},r,t,s]},Os=(o,t,n,s,r)=>{const c=vn(t,{}),[l,i,a,d,f]=Ls(o),[m,p,u]=Ss(d,a,c,C=>{g({},C)}),[h,k,,v]=Cs(o,t,u,a,d,r),x=C=>Ce(C).some(D=>!!C[D]),g=(C,D)=>{if(n())return!1;const{fn:A,Tt:S,At:N,pn:$}=C,E=A||{},w=!!S,_={It:vn(t,E,w),fn:E,Tt:w};if($)return k(_),!1;const V=D||p(Y({},_,{At:N})),b=i(Y({},_,{an:u,Gt:V}));k(Y({},_,{Gt:V,Qt:b}));const y=x(V),M=x(b),T=y||M||!Mo(E)||w;return T&&s(C,{Gt:V,Qt:b}),T};return[()=>{const{rn:C,gt:D}=d,A=ye(C),S=[m(),l(),h()];return be(D,A),U(Ee,S)},g,()=>({vn:u,hn:a}),{gn:d,bn:v},f]},Ge=(o,t,n)=>{const{N:s}=De(),r=Ht(o),c=r?o:o.target,l=Zn(c);if(t&&!l){let i=!1;const a=[],d={},f=w=>{const _=On(w),V=kt(_s);return V?V(_,!0):_},m=Y({},s(),f(t)),[p,u,h]=Eo(),[k,v,x]=Eo(n),g=(w,_)=>{x(w,_),h(w,_)},[C,D,A,S,N]=Os(o,m,()=>i,({fn:w,Tt:_},{Gt:V,Qt:b})=>{const{ft:y,Ct:M,xt:T,Ht:K,Et:Z,dt:J}=V,{Zt:L,tn:q,nn:G,sn:I}=b;g("updated",[E,{updateHints:{sizeChanged:!!y,directionChanged:!!M,heightIntrinsicChanged:!!T,overflowEdgeChanged:!!L,overflowAmountChanged:!!q,overflowStyleChanged:!!G,scrollCoordinatesChanged:!!I,contentMutation:!!K,hostMutation:!!Z,appear:!!J},changedOptions:w||{},force:!!_}])},w=>g("scroll",[E,w])),$=w=>{ks(c),Ee(a),i=!0,g("destroyed",[E,w]),u(),v()},E={options(w,_){if(w){const V=_?s():{},b=Gn(m,Y(V,f(w)));Mo(b)||(Y(m,b),D({fn:b}))}return Y({},m)},on:k,off:(w,_)=>{w&&_&&v(w,_)},state(){const{vn:w,hn:_}=A(),{ct:V}=w,{Vt:b,Rt:y,G:M,en:T,cn:K,un:Z,Pt:J}=_;return Y({},{overflowEdge:b,overflowAmount:y,overflowStyle:M,hasOverflow:T,scrollCoordinates:{start:J.T,end:J.D},padding:K,paddingAbsolute:Z,directionRTL:V,destroyed:i})},elements(){const{vt:w,ht:_,cn:V,ot:b,bt:y,gt:M,Kt:T}=S.gn,{Ft:K,Wt:Z}=S.bn,J=q=>{const{Mt:G,kt:I,Lt:ee}=q;return{scrollbar:ee,track:I,handle:G}},L=q=>{const{jt:G,Xt:I}=q,ee=J(G[0]);return Y({},ee,{clone:()=>{const F=J(I());return D({pn:!0}),F}})};return Y({},{target:w,host:_,padding:V||b,viewport:b,content:y||b,scrollOffsetElement:M,scrollEventElement:T,scrollbarHorizontal:L(K),scrollbarVertical:L(Z)})},update:w=>D({Tt:w,At:!0}),destroy:U($,!1),plugin:w=>d[Ce(w)[0]]};return se(a,[N]),gs(c,E),or(er,Ge,[E,p,d]),vs(S.gn.yt,!r&&o.cancel)?($(!0),E):(se(a,C()),g("initialized",[E]),E.update(!0),E)}return l};Ge.plugin=o=>{const t=Be(o),n=t?o:[o],s=n.map(r=>or(r,Ge)[0]);return xs(n),t?s:s[0]};Ge.valid=o=>{const t=o&&o.elements,n=xe(t)&&t();return Ft(n)&&!!Zn(n.target)};Ge.env=()=>{const{k:o,M:t,R:n,V:s,B:r,F:c,P:l,U:i,N:a,q:d}=De();return Y({},{scrollbarsSize:o,scrollbarsOverlaid:t,scrollbarsHiding:n,scrollTimeline:s,staticDefaultInitialization:r,staticDefaultOptions:c,getDefaultInitialization:l,setDefaultInitialization:i,getDefaultOptions:a,setDefaultOptions:d})};function Fs(){let o;const t=e.ref(null),n=Math.floor(Math.random()*2**32),s=e.ref(!1),r=e.ref([]),c=()=>r.value,l=()=>o.getSelection(),i=()=>r.value.length,a=()=>o.clearSelection(!0),d=e.ref();function f(){o=new br({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),o.subscribe("DS:start:pre",({items:k,event:v,isDragging:x})=>{if(x)o.Interaction._reset(v);else{s.value=!1;const g=t.value.offsetWidth-v.offsetX,C=t.value.offsetHeight-v.offsetY;g<15&&C<15&&o.Interaction._reset(v),v.target.classList.contains("os-scrollbar-handle")&&o.Interaction._reset(v)}}),document.addEventListener("dragleave",k=>{!k.buttons&&s.value&&(s.value=!1)})}const m=()=>e.nextTick(()=>{o.addSelection(o.getSelectables()),p()}),p=()=>{r.value=o.getSelection().map(k=>JSON.parse(k.dataset.item)),d.value(r.value)},u=()=>e.nextTick(()=>{const k=c().map(v=>v.path);a(),o.setSettings({selectables:document.getElementsByClassName("vf-item-"+n)}),o.addSelection(o.getSelectables().filter(v=>k.includes(JSON.parse(v.dataset.item).path))),p()}),h=k=>{d.value=k,o.subscribe("DS:end",({items:v,event:x,isDragging:g})=>{r.value=v.map(C=>JSON.parse(C.dataset.item)),k(v.map(C=>JSON.parse(C.dataset.item)))})};return e.onMounted(()=>{Ge({target:t.value.parentElement,elements:{viewport:t.value}},{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:Ge,ScrollbarsHidingPlugin:Es,SizeObserverPlugin:ws,ClickScrollPlugin:Vs}},{}),f()}),e.onUnmounted(()=>{o&&o.stop()}),e.onUpdated(()=>{o&&o.Area.reset()}),{area:t,explorerId:n,isDraggingRef:s,getSelected:c,getSelection:l,selectAll:m,clearSelection:a,refreshSelection:u,getCount:i,onSelect:h}}function Hs(o,t){const n=e.ref(o),s=e.ref(t),r=e.ref([]),c=e.ref([]),l=e.ref([]),i=e.ref(!1),a=e.ref(5);let d=!1,f=!1;const m=e.reactive({adapter:n,storages:[],dirname:s,files:[]});function p(){let g=[],C=[],D=s.value??n.value+"://";D.length===0&&(r.value=[]),D.replace(n.value+"://","").split("/").forEach(function(N){g.push(N),g.join("/")!==""&&C.push({basename:N,name:N,path:n.value+"://"+g.join("/"),type:"dir"})}),c.value=C;const[A,S]=h(C,a.value);l.value=S,r.value=A}function u(g){a.value=g,p()}function h(g,C){return g.length>C?[g.slice(-C),g.slice(0,-C)]:[g,[]]}function k(g=null){i.value=g??!i.value}function v(){return r.value&&r.value.length&&!f}const x=e.computed(()=>{var g;return((g=r.value[r.value.length-2])==null?void 0:g.path)??n.value+"://"});return e.onMounted(()=>{}),e.watch(s,p),e.onMounted(p),{adapter:n,path:s,loading:d,searchMode:f,data:m,breadcrumbs:r,breadcrumbItems:c,limitBreadcrumbItems:u,hiddenBreadcrumbs:l,showHiddenBreadcrumbs:i,toggleHiddenBreadcrumbs:k,isGoUpAvailable:v,parentFolderPath:x}}const Rs=(o,t)=>{const n=Cr(o.id),s=wr(),r=n.getStore("metricUnits",!1),c=Or(n,o.theme),l=t.i18n,i=o.locale??t.locale,a=n.getStore("adapter"),d=p=>Array.isArray(p)?p:Mr,f=n.getStore("persist-path",o.persist),m=f?n.getStore("path",o.path):o.path;return e.reactive({version:Ar,root:null,debug:o.debug,emitter:s,storage:n,i18n:e.computed(()=>Tr(n,i,s,l)),modal:Fr(),dragSelect:e.computed(()=>Fs()),requester:Br(o.request),features:d(o.features),view:n.getStore("viewport","grid"),fullScreen:n.getStore("full-screen",o.fullScreen),showTreeView:n.getStore("show-tree-view",o.showTreeView),pinnedFolders:n.getStore("pinned-folders",o.pinnedFolders),treeViewData:[],selectButton:o.selectButton,maxFileSize:o.maxFileSize,theme:c,metricUnits:r,filesize:r?$n:Sn,compactListView:n.getStore("compact-list-view",!0),persist:f,showThumbnails:n.getStore("show-thumbnails",o.showThumbnails),fs:Hs(a,m)})},zs=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),js={class:"fixed z-10 inset-0 overflow-hidden"},Is={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Us={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Te={__name:"ModalLayout",setup(o){const t=e.ref(null),n=e.inject("ServiceContainer");return e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(s,r)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(c=>e.unref(n).modal.close(),["esc"])),tabindex:"0"},[zs,e.createElementVNode("div",js,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:r[0]||(r[0]=e.withModifiers(c=>e.unref(n).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-3xl w-full"},[e.createElementVNode("div",Is,[e.renderSlot(s.$slots,"default")]),e.createElementVNode("div",Us,[e.renderSlot(s.$slots,"buttons")])],512)],32)])],32))}},Ps=(o,t)=>{const n=o.__vccOpts||o;for(const[s,r]of t)n[s]=r;return n},qs={props:{on:{type:String,required:!0}},setup(o,{emit:t,slots:n}){const s=e.inject("ServiceContainer"),r=e.ref(!1),{t:c}=s.i18n;let l=null;const i=()=>{clearTimeout(l),r.value=!0,l=setTimeout(()=>{r.value=!1},2e3)};return e.onMounted(()=>{s.emitter.on(o.on,i)}),e.onUnmounted(()=>{clearTimeout(l)}),{shown:r,t:c}}},Gs={key:1};function Ks(o,t,n,s,r,c){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["text-sm text-green-600 dark:text-green-600 transition-opacity duration-500 ease-out",[{"opacity-0":!s.shown}]])},[o.$slots.default?e.renderSlot(o.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Gs,e.toDisplayString(s.t("Saved.")),1))],2)}const tt=Ps(qs,[["render",Ks]]),Ws={class:"sm:flex sm:items-start select-none"},Ys=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])],-1),Xs={class:"mt-3 sm:mt-0 sm:ml-4 sm:text-left w-full"},Js={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Qs={class:"flex","aria-label":"Tabs"},Zs=["onClick","aria-current"],ea={key:0,class:"mt-4"},ta={class:"m-1 text-sm text-gray-500"},oa={href:"https://vuefinder.ozdemir.be",class:"block mt-2 text-sm text-blue-500 dark:text-blue-400",target:"_blank"},na={href:"https://github.com/n1crack/vuefinder",class:"block mt-2 text-sm text-blue-500 dark:text-blue-400",target:"_blank"},ra={key:1,class:"mt-2"},sa={class:"m-1 text-sm text-gray-500"},aa={class:"mt-3 text-left"},la={class:"space-y-2"},ca={class:"flex relative gap-x-3"},ia={class:"h-6 items-center"},da={class:"flex-1 block text-sm"},ua={for:"metric_unit",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},ma={class:"flex relative gap-x-3"},fa={class:"h-6 items-center"},pa={class:"flex-1 block text-sm"},ha={for:"large_icons",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},va={class:"flex relative gap-x-3"},ga={class:"h-6 items-center"},ka={class:"flex-1 block text-sm"},ya={for:"persist_path",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},xa={class:"flex relative gap-x-3"},_a={class:"h-6 items-center"},wa={class:"flex-1 block text-sm"},ba={for:"show_thumbnails",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},Ea={class:""},Va={class:"h-6 items-center"},Na={for:"theme",class:"flex w-full font-medium text-gray-900 dark:text-gray-400 text-sm"},Sa={class:"flex text-sm"},$a=["label"],Ba=["value"],Ca={key:0,class:""},Da={class:"h-6 items-center"},Ta={for:"language",class:"flex w-full font-medium text-gray-900 dark:text-gray-400 text-sm text-nowrap"},Ma={class:"flex text-sm"},Aa=["label"],La=["value"],Oa={key:2,class:"mt-3"},Fa={class:"space-y-2 sm:w-1/2"},Ha={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Ra=e.createElementVNode("kbd",null,"F2",-1),za={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},ja=e.createElementVNode("kbd",null,"F5",-1),Ia={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Ua=e.createElementVNode("kbd",null,"Del",-1),Pa={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},qa=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1),Ga={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Ka=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1),Wa={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Ya=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1),Xa={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Ja=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1),Qa={class:"flex justify-between text-sm text-gray-500 dark:text-gray-400"},Za=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1),el={key:3,class:"mt-3"},tl={class:"m-1 text-sm text-gray-500"},lr={__name:"ModalAbout",setup(o){const t=e.inject("ServiceContainer"),{setStore:n,clearStore:s}=t.storage,{t:r,changeLocale:c,locale:l}=t.i18n,i={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},a=e.computed(()=>[{name:r("About"),key:i.ABOUT},{name:r("Settings"),key:i.SETTINGS},{name:r("Shortcuts"),key:i.SHORTCUTS},{name:r("Reset"),key:i.RESET}]),d=e.ref("about"),f=async()=>{s(),location.reload()},m=D=>{t.theme.set(D),t.emitter.emit("vf-theme-saved")},p=()=>{t.metricUnits=!t.metricUnits,t.filesize=t.metricUnits?$n:Sn,n("metricUnits",t.metricUnits),t.emitter.emit("vf-metric-units-saved")},u=()=>{t.compactListView=!t.compactListView,n("compactListView",t.compactListView),t.emitter.emit("vf-compact-view-saved")},h=()=>{t.showThumbnails=!t.showThumbnails,n("show-thumbnails",t.showThumbnails),t.emitter.emit("vf-show-thumbnails-saved")},k=()=>{t.persist=!t.persist,n("persist-path",t.persist),t.emitter.emit("vf-persist-path-saved")},{i18n:v}=e.inject("VueFinderOptions"),g=Object.fromEntries(Object.entries({en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([D])=>Object.keys(v).includes(D))),C=e.computed(()=>({system:r("System"),light:r("Light"),dark:r("Dark")}));return(D,A)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:A[8]||(A[8]=S=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ws,[Ys,e.createElementVNode("div",Xs,[e.createElementVNode("h3",Js,e.toDisplayString("Vuefinder "+e.unref(t).version),1),e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",Qs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,S=>(e.openBlock(),e.createElementBlock("button",{key:S.name,onClick:N=>d.value=S.key,class:e.normalizeClass([S.key===d.value?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 border-sky-500":"text-gray-500 dark:text-gray-500 hover:text-gray-700 border-gray-300 dark:border-gray-600","px-3 py-2 border-b font-medium text-sm"]),"aria-current":S.current?"page":void 0},e.toDisplayString(S.name),11,Zs))),128))])])]),d.value===i.ABOUT?(e.openBlock(),e.createElementBlock("div",ea,[e.createElementVNode("div",ta,e.toDisplayString(e.unref(r)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",oa,e.toDisplayString(e.unref(r)("Project home")),1),e.createElementVNode("a",na,e.toDisplayString(e.unref(r)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),d.value===i.SETTINGS?(e.openBlock(),e.createElementBlock("div",ra,[e.createElementVNode("div",sa,e.toDisplayString(e.unref(r)("Customize your experience with the following settings.")),1),e.createElementVNode("div",aa,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",la,[e.createElementVNode("div",ca,[e.createElementVNode("div",ia,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":A[0]||(A[0]=S=>e.unref(t).metricUnits=S),onClick:p,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).metricUnits]])]),e.createElementVNode("div",da,[e.createElementVNode("label",ua,[e.createTextVNode(e.toDisplayString(e.unref(r)("Use Metric Units"))+" ",1),e.createVNode(tt,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",ma,[e.createElementVNode("div",fa,[e.withDirectives(e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":A[1]||(A[1]=S=>e.unref(t).compactListView=S),onClick:u,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).compactListView]])]),e.createElementVNode("div",pa,[e.createElementVNode("label",ha,[e.createTextVNode(e.toDisplayString(e.unref(r)("Compact list view"))+" ",1),e.createVNode(tt,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",va,[e.createElementVNode("div",ga,[e.withDirectives(e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":A[2]||(A[2]=S=>e.unref(t).persist=S),onClick:k,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).persist]])]),e.createElementVNode("div",ka,[e.createElementVNode("label",ya,[e.createTextVNode(e.toDisplayString(e.unref(r)("Persist path on reload"))+" ",1),e.createVNode(tt,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",xa,[e.createElementVNode("div",_a,[e.withDirectives(e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=S=>e.unref(t).showThumbnails=S),onClick:h,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).showThumbnails]])]),e.createElementVNode("div",wa,[e.createElementVNode("label",ba,[e.createTextVNode(e.toDisplayString(e.unref(r)("Show thumbnails"))+" ",1),e.createVNode(tt,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Ea,[e.createElementVNode("div",Va,[e.createElementVNode("label",Na,e.toDisplayString(e.unref(r)("Theme")),1)]),e.createElementVNode("div",Sa,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":A[4]||(A[4]=S=>e.unref(t).theme.value=S),onChange:A[5]||(A[5]=S=>m(S.target.value)),class:"flex-shrink-0 sm:w-1/2 w-full text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded"},[e.createElementVNode("optgroup",{label:e.unref(r)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(S,N)=>(e.openBlock(),e.createElementBlock("option",{value:N},e.toDisplayString(S),9,Ba))),256))],8,$a)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(tt,{class:"ms-3 flex-shrink-0 flex-grow basis-full",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(oe).LANGUAGE)&&Object.keys(e.unref(g)).length>1?(e.openBlock(),e.createElementBlock("div",Ca,[e.createElementVNode("div",Da,[e.createElementVNode("label",Ta,e.toDisplayString(e.unref(r)("Language")),1)]),e.createElementVNode("div",Ma,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":A[6]||(A[6]=S=>e.isRef(l)?l.value=S:null),onChange:A[7]||(A[7]=S=>e.unref(c)(S.target.value)),class:"flex-shrink-0 sm:w-1/2 w-full text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded"},[e.createElementVNode("optgroup",{label:e.unref(r)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),(S,N)=>(e.openBlock(),e.createElementBlock("option",{value:N},e.toDisplayString(S),9,La))),256))],8,Aa)],544),[[e.vModelSelect,e.unref(l)]]),e.createVNode(tt,{class:"ms-3 flex-shrink-0 flex-grow basis-full",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])])):e.createCommentVNode("",!0),d.value===i.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",Oa,[e.createElementVNode("div",Fa,[e.createElementVNode("div",Ha,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Rename")),1),Ra]),e.createElementVNode("div",za,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Refresh")),1),ja]),e.createElementVNode("div",Ia,[e.createTextVNode(e.toDisplayString(e.unref(r)("Delete"))+" ",1),Ua]),e.createElementVNode("div",Pa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Escape"))+" ",1),qa]),e.createElementVNode("div",Ga,[e.createTextVNode(e.toDisplayString(e.unref(r)("Select All"))+" ",1),Ka]),e.createElementVNode("div",Wa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Search"))+" ",1),Ya]),e.createElementVNode("div",Xa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Sidebar"))+" ",1),Ja]),e.createElementVNode("div",Qa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Open Settings"))+" ",1),Za])])])):e.createCommentVNode("",!0),d.value===i.RESET?(e.openBlock(),e.createElementBlock("div",el,[e.createElementVNode("div",tl,e.toDisplayString(e.unref(r)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:f,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}},ol=["aria-label"],nl=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),rl=[nl],Me={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(o,{emit:t}){var d;const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,c=e.ref(!1),l=e.ref(null),i=e.ref((d=l.value)==null?void 0:d.strMessage);e.watch(i,()=>c.value=!1);const a=()=>{n("hidden"),c.value=!0};return(f,m)=>(e.openBlock(),e.createElementBlock("div",null,[c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:l,class:e.normalizeClass(["flex mt-2 p-1 px-2 rounded text-sm break-all dark:opacity-75",o.error?"bg-red-100 text-red-600 ":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(f.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:a,"aria-label":e.unref(r)("Close"),"data-microtip-position":"top-left",role:"tooltip"},rl,8,ol)],2))]))}},sl={class:"sm:flex sm:items-start"},al=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),ll={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},cl={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},il={class:"mt-2"},dl={class:"text-sm text-gray-500"},ul={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},ml={class:"flex text-sm text-gray-800 dark:text-gray-400"},fl={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},pl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),hl=[pl],vl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},gl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),kl=[gl],yl={class:"ml-1.5"},xl={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},Ko={__name:"ModalDelete",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items),r=e.ref(""),c=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:i})=>({path:l,type:i}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(n)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",xl,e.toDisplayString(e.unref(n)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",sl,[al,e.createElementVNode("div",ll,[e.createElementVNode("h3",cl,e.toDisplayString(e.unref(n)("Delete files")),1),e.createElementVNode("div",il,[e.createElementVNode("p",dl,e.toDisplayString(e.unref(n)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",ul,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("p",ml,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",fl,hl)):(e.openBlock(),e.createElementBlock("svg",vl,kl)),e.createElementVNode("span",yl,e.toDisplayString(a.basename),1)]))),256))]),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:i[0]||(i[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},_l={class:"sm:flex sm:items-start"},wl=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),bl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},El={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Vl={class:"mt-2"},Nl={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},Sl={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},$l=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Bl=[$l],Cl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Dl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Tl=[Dl],Ml={class:"ml-1.5"},Wo={__name:"ModalRename",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(t.modal.data.items[0].basename),c=e.ref(""),l=()=>{r.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",r.value)})},onError:i=>{c.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",_l,[wl,e.createElementVNode("div",bl,[e.createElementVNode("h3",El,e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("div",Vl,[e.createElementVNode("p",Nl,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Sl,Bl)):(e.openBlock(),e.createElementBlock("svg",Cl,Tl)),e.createElementVNode("span",Ml,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>r.value=d),onKeyup:e.withKeys(l,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,544),[[e.vModelText,r.value]]),c.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:a[1]||(a[1]=d=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},je={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF"};function Al(o){const t=n=>{n.code===je.ESCAPE&&(o.modal.close(),o.root.focus()),!o.modal.visible&&(o.fs.searchMode||(n.code===je.F2&&o.features.includes(oe.RENAME)&&(o.dragSelect.getCount()!==1||o.modal.open(Wo,{items:o.dragSelect.getSelected()})),n.code===je.F5&&o.emitter.emit("vf-fetch",{params:{q:"index",adapter:o.fs.adapter,path:o.fs.data.dirname}}),n.code===je.DELETE&&(!o.dragSelect.getCount()||o.modal.open(Ko,{items:o.dragSelect.getSelected()})),n.metaKey&&n.code===je.BACKSLASH&&o.modal.open(lr),n.metaKey&&n.code===je.KEY_F&&o.features.includes(oe.SEARCH)&&(o.fs.searchMode=!0,n.preventDefault()),n.metaKey&&n.code===je.KEY_E&&(o.showTreeView=!o.showTreeView,o.storage.setStore("show-tree-view",o.showTreeView)),n.metaKey&&n.code===je.KEY_A&&(o.dragSelect.selectAll(),n.preventDefault())))};e.onMounted(()=>{o.root.addEventListener("keydown",t)}),e.onUnmounted(()=>{o.root.removeEventListener("keydown",t)})}const Ll={class:"sm:flex sm:items-start"},Ol=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),Fl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Hl={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Rl={class:"mt-2"},zl={class:"text-sm text-gray-500"},jl=["placeholder"],cr={__name:"ModalNewFolder",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ll,[Ol,e.createElementVNode("div",Fl,[e.createElementVNode("h3",Hl,e.toDisplayString(e.unref(n)("New Folder")),1),e.createElementVNode("div",Rl,[e.createElementVNode("p",zl,e.toDisplayString(e.unref(n)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Folder Name"),type:"text"},null,40,jl),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:i[1]||(i[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Il={class:"sm:flex sm:items-start"},Ul=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Pl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ql={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Gl={class:"mt-2"},Kl={class:"text-sm text-gray-500"},Wl=["placeholder"],Yl={__name:"ModalNewFile",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Il,[Ul,e.createElementVNode("div",Pl,[e.createElementVNode("h3",ql,e.toDisplayString(e.unref(n)("New File")),1),e.createElementVNode("div",Gl,[e.createElementVNode("p",Kl,e.toDisplayString(e.unref(n)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("File Name"),type:"text"},null,40,Wl),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:i[1]||(i[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}};function So(o,t=14){let n=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return o.replace(new RegExp(n),"$2..$4")}const Xl={class:"sm:flex sm:items-start"},Jl=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),Ql={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Zl={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ec={class:"mt-2"},tc={key:0,class:"pointer-events-none"},oc={key:1,class:"pointer-events-none"},nc=["disabled"],rc=["disabled"],sc={class:"text-gray-500 text-sm mb-1 pr-1 max-h-[200px] overflow-y-auto vf-scrollbar"},ac={class:"rounded flex flex-shrink-0 w-6 h-6 border bg-gray-50 text-xs cursor-default dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50"},lc=["textContent"],cc={class:"ml-1 w-full h-fit"},ic={class:"text-left hidden md:block"},dc={class:"text-left md:hidden"},uc={key:0,class:"ml-auto"},mc=["title","disabled","onClick"],fc=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),pc=[fc],hc={key:0,class:"py-2"},vc=["disabled"],gc={__name:"ModalUpload",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=n("uppy"),r={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},c=e.ref({QUEUE_ENTRY_STATUS:r}),l=e.ref(null),i=e.ref(null),a=e.ref(null),d=e.ref(null),f=e.ref(null),m=e.ref(null),p=e.ref([]),u=e.ref(""),h=e.ref(!1),k=e.ref(!1);let v;function x(V){return p.value.findIndex(b=>b.id===V)}function g(V,b=null){b=b??(V.webkitRelativePath||V.name),v.addFile({name:b,type:V.type,data:V,source:"Local"})}function C(V){switch(V.status){case r.DONE:return"text-green-600";case r.ERROR:return"text-red-600";case r.CANCELED:return"text-red-600";case r.PENDING:default:return""}}const D=V=>{switch(V.status){case r.DONE:return"✓";case r.ERROR:case r.CANCELED:return"!";case r.PENDING:default:return"..."}};function A(){d.value.click()}function S(){if(!h.value){if(!p.value.filter(V=>V.status!==r.DONE).length){u.value=n("Please select file to upload first.");return}u.value="",v.retryAll(),v.upload()}}function N(){v.cancelAll({reason:"user"}),p.value.forEach(V=>{V.status!==r.DONE&&(V.status=r.CANCELED,V.statusName=n("Canceled"))}),h.value=!1}function $(V){h.value||(v.removeFile(V.id,"removed-by-user"),p.value.splice(x(V.id),1))}function E(V){if(!h.value){if(v.cancelAll({reason:"user"}),V){const b=[];p.value.forEach(y=>{y.status!==r.DONE&&b.push(y)}),p.value=[],b.forEach(y=>{g(y.originalFile,y.name)});return}p.value.splice(0)}}function w(){t.modal.close()}function _(){return t.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:t.fs.adapter,path:t.fs.data.dirname}})}return e.onMounted(async()=>{v=new Er({debug:t.debug,restrictions:{maxFileSize:Lr(t.maxFileSize)},locale:s,onBeforeFileAdded(y,M){if(M[y.id]!=null){const K=x(y.id);p.value[K].status===r.PENDING&&(u.value=v.i18n("noDuplicates",{fileName:y.name})),p.value=p.value.filter(Z=>Z.id!==y.id)}return p.value.push({id:y.id,name:y.name,size:t.filesize(y.size),status:r.PENDING,statusName:n("Pending upload"),percent:null,originalFile:y.data}),!0}}),v.use(Vr,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(y,M){let T;try{T=JSON.parse(y).message}catch{T=n("Cannot parse server response.")}return new Error(T)}}),v.on("restriction-failed",(y,M)=>{const T=p.value[x(y.id)];$(T),u.value=M.message}),v.on("upload",()=>{const y=_();v.setMeta({...y.body});const M=v.getPlugin("XHRUpload");M.opts.method=y.method,M.opts.endpoint=y.url+"?"+new URLSearchParams(y.params),M.opts.headers=y.headers,delete y.headers["Content-Type"],h.value=!0,p.value.forEach(T=>{T.status!==r.DONE&&(T.percent=null,T.status=r.UPLOADING,T.statusName=n("Pending upload"))})}),v.on("upload-progress",(y,M)=>{const T=Math.floor(M.bytesUploaded/M.bytesTotal*100);p.value[x(y.id)].percent=`${T}%`}),v.on("upload-success",y=>{const M=p.value[x(y.id)];M.status=r.DONE,M.statusName=n("Done")}),v.on("upload-error",(y,M)=>{const T=p.value[x(y.id)];T.percent=null,T.status=r.ERROR,M.isNetworkError?T.statusName=n("Network Error, Unable establish connection to the server or interrupted."):T.statusName=M?M.message:n("Unknown Error")}),v.on("error",y=>{u.value=y.message,h.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),v.on("complete",()=>{h.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),d.value.addEventListener("click",()=>{i.value.click()}),f.value.addEventListener("click",()=>{a.value.click()}),m.value.addEventListener("dragover",y=>{y.preventDefault(),k.value=!0}),m.value.addEventListener("dragleave",y=>{y.preventDefault(),k.value=!1});function V(y,M){M.isFile&&M.file(T=>y(M,T)),M.isDirectory&&M.createReader().readEntries(T=>{T.forEach(K=>{V(y,K)})})}m.value.addEventListener("drop",y=>{y.preventDefault(),k.value=!1;const M=/^[/\\](.+)/;[...y.dataTransfer.items].forEach(T=>{T.kind==="file"&&V((K,Z)=>{const J=M.exec(K.fullPath);g(Z,J[1])},T.webkitGetAsEntry())})});const b=({target:y})=>{const M=y.files;for(const T of M)g(T);y.value=""};i.value.addEventListener("change",b),a.value.addEventListener("change",b)}),e.onBeforeUnmount(()=>{v==null||v.close({reason:"unmount"})}),(V,b)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vf-btn vf-btn-primary",h.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500"]),disabled:h.value,onClick:e.withModifiers(S,["prevent"])},e.toDisplayString(e.unref(n)("Upload")),11,vc),h.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(N,["prevent"])},e.toDisplayString(e.unref(n)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(w,["prevent"])},e.toDisplayString(e.unref(n)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",Xl,[Jl,e.createElementVNode("div",Ql,[e.createElementVNode("h3",Zl,e.toDisplayString(e.unref(n)("Upload Files")),1),e.createElementVNode("div",ec,[e.createElementVNode("div",{ref_key:"dropArea",ref:m,class:"flex items-center justify-center text-lg mb-4 text-gray-500 border-2 border-gray-300 rounded border-dashed select-none cursor-pointer dark:border-gray-600 h-[120px]",onClick:A},[k.value?(e.openBlock(),e.createElementBlock("div",tc,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",oc,e.toDisplayString(e.unref(n)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:l,class:"text-gray-500 mb-1"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:d,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:f,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:h.value,onClick:b[0]||(b[0]=y=>E(!1))},e.toDisplayString(e.unref(n)("Clear all")),9,nc),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:h.value,onClick:b[1]||(b[1]=y=>E(!0))},e.toDisplayString(e.unref(n)("Clear only successful")),9,rc)],512),e.createElementVNode("div",sc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,y=>(e.openBlock(),e.createElementBlock("div",{class:"flex hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-gray-300",key:y.id},[e.createElementVNode("span",ac,[e.createElementVNode("span",{class:e.normalizeClass(["text-base m-auto",C(y)]),textContent:e.toDisplayString(D(y))},null,10,lc)]),e.createElementVNode("div",cc,[e.createElementVNode("div",ic,e.toDisplayString(e.unref(So)(y.name,40))+" ("+e.toDisplayString(y.size)+")",1),e.createElementVNode("div",dc,e.toDisplayString(e.unref(So)(y.name,16))+" ("+e.toDisplayString(y.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["flex break-all text-left",C(y)])},[e.createTextVNode(e.toDisplayString(y.statusName)+" ",1),y.status===c.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",uc,e.toDisplayString(y.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["rounded w-5 h-5 border-1 text-base leading-none font-medium focus:outline-none dark:border-gray-200 dark:text-gray-400 dark:hover:text-gray-200 dark:bg-gray-600 ml-auto sm:text-xs hover:text-red-600",h.value?"disabled:bg-gray-100 text-white text-opacity-50":"bg-gray-100"]),title:e.unref(n)("Delete"),disabled:h.value,onClick:M=>$(y)},pc,10,mc)]))),128)),p.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",hc,e.toDisplayString(e.unref(n)("No files selected!")),1))]),u.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:b[2]||(b[2]=y=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:i,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:a,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}},kc={class:"sm:flex sm:items-start"},yc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),xc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},_c={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},wc={class:"mt-2"},bc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Ec={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Nc=[Vc],Sc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},$c=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Bc=[$c],Cc={class:"ml-1.5"},Dc={class:"my-1 text-sm text-gray-500"},ir={__name:"ModalUnarchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(""),c=e.ref([]),l=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file unarchived.")})},onError:i=>{r.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:a[1]||(a[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",kc,[yc,e.createElementVNode("div",xc,[e.createElementVNode("h3",_c,e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("div",wc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,d=>(e.openBlock(),e.createElementBlock("p",bc,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Ec,Nc)):(e.openBlock(),e.createElementBlock("svg",Sc,Bc)),e.createElementVNode("span",Cc,e.toDisplayString(d.basename),1)]))),256)),e.createElementVNode("p",Dc,e.toDisplayString(e.unref(n)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(t).fs.data.dirname)+")",1),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:a[0]||(a[0]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Tc={class:"sm:flex sm:items-start"},Mc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ac={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Lc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Oc={class:"mt-2"},Fc={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},Hc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Rc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},zc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),jc=[zc],Ic={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Uc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Pc=[Uc],qc={class:"ml-1.5"},Gc=["placeholder"],dr={__name:"ModalArchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=e.ref(t.modal.data.items),l=()=>{c.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:c.value.map(({path:i,type:a})=>({path:i,type:a})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:i=>{r.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Tc,[Mc,e.createElementVNode("div",Ac,[e.createElementVNode("h3",Lc,e.toDisplayString(e.unref(n)("Archive the files")),1),e.createElementVNode("div",Oc,[e.createElementVNode("div",Fc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,d=>(e.openBlock(),e.createElementBlock("p",Hc,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Rc,jc)):(e.openBlock(),e.createElementBlock("svg",Ic,Pc)),e.createElementVNode("span",qc,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>s.value=d),onKeyup:e.withKeys(l,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,Gc),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:a[1]||(a[1]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Kc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Wc=e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1),Yc=[Wc];function Xc(o,t){return e.openBlock(),e.createElementBlock("svg",Kc,[...Yc])}const Jc={render:Xc},Qc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Zc=e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1),ei=[Zc];function ti(o,t){return e.openBlock(),e.createElementBlock("svg",Qc,[...ei])}const oi={render:ti},ni={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},ri=e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1),si=[ri];function ai(o,t){return e.openBlock(),e.createElementBlock("svg",ni,[...si])}const li={render:ai},ci={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},ii=e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1),di=[ii];function ui(o,t){return e.openBlock(),e.createElementBlock("svg",ci,[...di])}const mi={render:ui},fi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},pi=e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),hi=[pi];function vi(o,t){return e.openBlock(),e.createElementBlock("svg",fi,[...hi])}const gi={render:vi},ki={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},yi=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),xi=[yi];function _i(o,t){return e.openBlock(),e.createElementBlock("svg",ki,[...xi])}const wi={render:_i},bi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Ei=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),Vi=[Ei];function Ni(o,t){return e.openBlock(),e.createElementBlock("svg",bi,[...Vi])}const Si={render:Ni},$i={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"},Bi=e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),Ci=e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1),Di=[Bi,Ci];function Ti(o,t){return e.openBlock(),e.createElementBlock("svg",$i,[...Di])}const Yo={render:Ti},Mi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Ai=e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),Li=[Ai];function Oi(o,t){return e.openBlock(),e.createElementBlock("svg",Mi,[...Li])}const Fi={render:Oi},Hi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Ri=e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1),zi=[Ri];function ji(o,t){return e.openBlock(),e.createElementBlock("svg",Hi,[...zi])}const Ii={render:ji},Ui={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Pi=e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1),qi=[Pi];function Gi(o,t){return e.openBlock(),e.createElementBlock("svg",Ui,[...qi])}const Ki={render:Gi},Wi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Yi=e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1),Xi=[Yi];function Ji(o,t){return e.openBlock(),e.createElementBlock("svg",Wi,[...Xi])}const Qi={render:Ji},Zi={class:"border-neutral-300 flex justify-between items-center py-1 text-sm grow-0"},ed={key:0,class:"flex text-center"},td=["aria-label"],od=["aria-label"],nd=["aria-label"],rd=["aria-label"],sd=["aria-label"],ad=["aria-label"],ld=["aria-label"],cd={key:1,class:"flex text-center"},id={class:"pl-2"},dd={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},ud={class:"flex text-center items-center justify-end"},md=["aria-label"],fd=["aria-label"],pd={__name:"Toolbar",setup(o){const t=e.inject("ServiceContainer"),{setStore:n}=t.storage,{t:s}=t.i18n,r=t.dragSelect,c=e.ref("");t.emitter.on("vf-search-query",({newQuery:a})=>{c.value=a});const l=()=>{t.fullScreen=!t.fullScreen,t.fullScreen?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="",n("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")},i=()=>{t.view=t.view==="list"?"grid":"list",r.refreshSelection(),n("viewport",t.view)};return(a,d)=>(e.openBlock(),e.createElementBlock("div",Zi,[c.value.length?(e.openBlock(),e.createElementBlock("div",cd,[e.createElementVNode("div",id,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search results for"))+" ",1),e.createElementVNode("span",dd,e.toDisplayString(c.value),1)]),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Yo),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",ed,[e.unref(t).features.includes(e.unref(oe).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(s)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:d[0]||(d[0]=f=>e.unref(t).modal.open(cr,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Jc))],8,td)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":e.unref(s)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[1]||(d[1]=f=>e.unref(t).modal.open(Yl,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(oi))],8,od)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5","aria-label":e.unref(s)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[2]||(d[2]=f=>e.unref(r).getCount()!==1||e.unref(t).modal.open(Wo,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(li),{class:e.normalizeClass(e.unref(r).getCount()===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,nd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5","aria-label":e.unref(s)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[3]||(d[3]=f=>!e.unref(r).getCount()||e.unref(t).modal.open(Ko,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(mi),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,rd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5","aria-label":e.unref(s)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[4]||(d[4]=f=>e.unref(t).modal.open(gc,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(gi))],8,sd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).UNARCHIVE)&&e.unref(r).getCount()===1&&e.unref(r).getSelected()[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5","aria-label":e.unref(s)("Unarchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[5]||(d[5]=f=>!e.unref(r).getCount()||e.unref(t).modal.open(ir,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Si),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ad)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(oe).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5","aria-label":e.unref(s)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[6]||(d[6]=f=>!e.unref(r).getCount()||e.unref(t).modal.open(dr,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(wi),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ld)):e.createCommentVNode("",!0)])),e.createElementVNode("div",ud,[e.unref(t).features.includes(e.unref(oe).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:l,class:"mx-1.5","aria-label":e.unref(s)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip"},[e.unref(t).fullScreen?(e.openBlock(),e.createBlock(e.unref(Ii),{key:0})):(e.openBlock(),e.createBlock(e.unref(Fi),{key:1}))],8,md)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(s)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:d[7]||(d[7]=f=>c.value.length||i())},[e.unref(t).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Ki),{key:0,class:e.normalizeClass(c.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0),e.unref(t).view==="list"?(e.openBlock(),e.createBlock(e.unref(Qi),{key:1,class:e.normalizeClass(c.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0)],8,fd)])]))}},hd=(o,t=0,n=!1)=>{let s;return(...r)=>{n&&!s&&o(...r),clearTimeout(s),s=setTimeout(()=>{o(...r)},t)}},Vn=(o,t,n)=>{const s=e.ref(o);return e.customRef((r,c)=>({get(){return r(),s.value},set:hd(l=>{s.value=l,c()},t,n)}))},vd={class:"sm:flex sm:items-start"},gd=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),kd={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},yd={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},xd={class:"text-sm text-gray-500 pb-1"},_d={class:"max-h-[200px] overflow-y-auto vf-scrollbar text-left"},wd={class:"flex text-sm text-gray-800 dark:text-gray-400"},bd={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ed=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Vd=[Ed],Nd={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Sd=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),$d=[Sd],Bd={class:"ml-1.5"},Cd={class:"font-bold text-xs text-gray-700 dark:text-gray-500 mt-3 tracking-wider"},Dd={class:"flex text-sm text-gray-800 dark:text-gray-400 border dark:border-gray-700 p-1 rounded"},Td=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),Md={class:"ml-1.5 overflow-auto"},Ad={class:"m-1 mr-auto font-bold text-gray-500 text-sm dark:text-gray-200 self-center"},$o={__name:"ModalMove",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items.from),r=e.ref(""),c=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:i})=>({path:l,type:i})),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files moved.",t.modal.data.items.to.name)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",Ad,e.toDisplayString(e.unref(n)("%s item(s) selected.",s.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",vd,[gd,e.createElementVNode("div",kd,[e.createElementVNode("h3",yd,e.toDisplayString(e.unref(n)("Move files")),1),e.createElementVNode("p",xd,e.toDisplayString(e.unref(n)("Are you sure you want to move these files?")),1),e.createElementVNode("div",_d,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("div",wd,[e.createElementVNode("div",null,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",bd,Vd)):(e.openBlock(),e.createElementBlock("svg",Nd,$d))]),e.createElementVNode("div",Bd,e.toDisplayString(a.path),1)]))),256))]),e.createElementVNode("h4",Cd,e.toDisplayString(e.unref(n)("Target Directory")),1),e.createElementVNode("p",Dd,[Td,e.createElementVNode("span",Md,e.toDisplayString(e.unref(t).modal.data.items.to.path),1)]),r.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:i[0]||(i[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}},Ld={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"},Od=e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1),Fd=[Od];function Hd(o,t){return e.openBlock(),e.createElementBlock("svg",Ld,[...Fd])}const Rd={render:Hd},zd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"},jd=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1),Id=[jd];function Ud(o,t){return e.openBlock(),e.createElementBlock("svg",zd,[...Id])}const Pd={render:Ud},qd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"},Gd=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),Kd=[Gd];function Wd(o,t){return e.openBlock(),e.createElementBlock("svg",qd,[...Kd])}const Yd={render:Wd},Xd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"},Jd=e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1),Qd=[Jd];function Zd(o,t){return e.openBlock(),e.createElementBlock("svg",Xd,[...Qd])}const eu={render:Zd},tu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"},ou=e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1),nu=[ou];function ru(o,t){return e.openBlock(),e.createElementBlock("svg",tu,[...nu])}const su={render:ru},au={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"},lu=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),cu=[lu];function iu(o,t){return e.openBlock(),e.createElementBlock("svg",au,[...cu])}const du={render:iu},uu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"},mu=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1),fu=[mu];function pu(o,t){return e.openBlock(),e.createElementBlock("svg",uu,[...fu])}const Jt={render:pu},hu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"},vu=e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),gu=e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1),ku=[vu,gu];function yu(o,t){return e.openBlock(),e.createElementBlock("svg",hu,[...ku])}const xu={render:yu},_u={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"},wu=e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1),bu=[wu];function Eu(o,t){return e.openBlock(),e.createElementBlock("svg",_u,[...bu])}const Vu={render:Eu},Nu={class:"space-x-0.5 flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-sm grow-0"},Su=["aria-label"],$u=["aria-label"],Bu=["aria-label"],Cu=["aria-label"],Du={class:"flex leading-6"},Tu={key:0,class:"flex"},Mu=e.createElementVNode("div",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Au={class:"relative"},Lu=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Ou=["onDragover","onDragleave","onDrop","title","onClick"],Fu={class:"relative flex bg-white dark:bg-gray-700 justify-between items-center rounded p-1 ml-2 w-full"},Hu=["placeholder"],Ru={class:"z-30 absolute top-[65px] md:top-[75px] left-[90px] rounded -mx-1.5 mt-1 bg-neutral-50 dark:bg-gray-800 max-w-80 max-h-50 shadow overflow-y-auto text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600"},zu=["onDrop","onClick"],ju={class:"flex pointer-events-none"},Iu={class:"inline-block w-full text-ellipsis overflow-hidden"},Uu={__name:"Breadcrumb",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=t.dragSelect,{setStore:r}=t.storage,c=e.ref(null),l=Vn(0,100);e.watch(l,N=>{const $=c.value.children;let E=0,w=0,_=5,V=1;t.fs.limitBreadcrumbItems(_),e.nextTick(()=>{for(let b=$.length-1;b>=0&&!(E+$[b].offsetWidth>l.value-40);b--)E+=parseInt($[b].offsetWidth,10),w++;w<V&&(w=V),w>_&&(w=_),t.fs.limitBreadcrumbItems(w)})});const i=()=>{l.value=c.value.offsetWidth};e.onMounted(()=>{new ResizeObserver(i).observe(c.value)});const a=(N,$=null)=>{N.preventDefault(),s.isDraggingRef.value=!1,m(N),$??($=t.fs.hiddenBreadcrumbs.length-1);let E=JSON.parse(N.dataTransfer.getData("items"));if(E.find(w=>w.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open($o,{items:{from:E,to:t.fs.hiddenBreadcrumbs[$]??{path:t.fs.adapter+"://"}}})},d=(N,$=null)=>{N.preventDefault(),s.isDraggingRef.value=!1,m(N),$??($=t.fs.breadcrumbs.length-2);let E=JSON.parse(N.dataTransfer.getData("items"));if(E.find(w=>w.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open($o,{items:{from:E,to:t.fs.breadcrumbs[$]??{path:t.fs.adapter+"://"}}})},f=N=>{N.preventDefault(),t.fs.isGoUpAvailable()?(N.dataTransfer.dropEffect="copy",N.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(N.dataTransfer.dropEffect="none",N.dataTransfer.effectAllowed="none")},m=N=>{N.preventDefault(),N.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&N.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},p=()=>{A(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},u=()=>{A(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},h=N=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:N.path}}),t.fs.toggleHiddenBreadcrumbs(!1)},k=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},v={mounted(N,$,E,w){N.clickOutsideEvent=function(_){N===_.target||N.contains(_.target)||$.value()},document.body.addEventListener("click",N.clickOutsideEvent)},beforeUnmount(N,$,E,w){document.body.removeEventListener("click",N.clickOutsideEvent)}},x=()=>{t.showTreeView=!t.showTreeView,r("show-tree-view",t.showTreeView)},g=e.ref(null),C=()=>{t.features.includes(oe.SEARCH)&&(t.fs.searchMode=!0,e.nextTick(()=>g.value.focus()))},D=Vn("",400);e.watch(D,N=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:N})}),e.watch(()=>t.fs.searchMode,N=>{N&&e.nextTick(()=>g.value.focus())});const A=()=>{t.fs.searchMode=!1,D.value=""};t.emitter.on("vf-search-exit",()=>{A()});const S=()=>{D.value===""&&A()};return(N,$)=>(e.openBlock(),e.createElementBlock("div",Nu,[e.createElementVNode("span",{"aria-label":e.unref(n)("Toggle Tree View"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(xu),{onClick:x,class:e.normalizeClass(["h-6 w-6 p-0.5 rounded cursor-pointer text-slate-700",e.unref(t).showTreeView?"bg-gray-300 dark:bg-gray-700":""])},null,8,["class"])],8,Su),e.createElementVNode("span",{"aria-label":e.unref(n)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(Pd),{onDragover:$[0]||($[0]=E=>f(E)),onDragleave:$[1]||($[1]=E=>m(E)),onDrop:$[2]||($[2]=E=>d(E)),onClick:u,class:e.normalizeClass(e.unref(t).fs.isGoUpAvailable()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500")},null,8,["class"])],8,$u),e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-label":e.unref(n)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(Yd),{onClick:$[3]||($[3]=E=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,Cu)):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(n)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(Rd),{onClick:p})],8,Bu)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(C,["self"]),class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full overflow-hidden"},[e.createElementVNode("div",null,[e.createVNode(e.unref(eu),{onDragover:$[4]||($[4]=E=>f(E)),onDragleave:$[5]||($[5]=E=>m(E)),onDrop:$[6]||($[6]=E=>d(E,-1)),onClick:$[7]||($[7]=E=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter}}))})]),e.createElementVNode("div",Du,[e.unref(t).fs.hiddenBreadcrumbs.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Tu,[Mu,e.createElementVNode("div",Au,[e.createElementVNode("span",{onDragenter:$[8]||($[8]=E=>e.unref(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:$[9]||($[9]=E=>e.unref(t).fs.toggleHiddenBreadcrumbs()),class:"text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer"},[e.createVNode(e.unref(Vu),{class:"px-1 pointer-events-none"})],32)])])),[[v,k]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:c,class:"flex leading-6 w-full overflow-hidden",onClick:e.withModifiers(C,["self"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.breadcrumbs,(E,w)=>(e.openBlock(),e.createElementBlock("div",{key:w},[Lu,e.createElementVNode("span",{onDragover:_=>w===e.unref(t).fs.breadcrumbs.length-1||f(_),onDragleave:_=>w===e.unref(t).fs.breadcrumbs.length-1||m(_),onDrop:_=>w===e.unref(t).fs.breadcrumbs.length-1||d(_,w),class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer whitespace-nowrap",title:E.basename,onClick:_=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter,path:E.path}})},e.toDisplayString(E.name),41,Ou)]))),128))],512),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Yo),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Fu,[e.createElementVNode("div",null,[e.createVNode(e.unref(su))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:g,onKeydown:e.withKeys(A,["esc"]),onBlur:S,"onUpdate:modelValue":$[10]||($[10]=E=>e.isRef(D)?D.value=E:null),placeholder:e.unref(n)("Search anything.."),class:"w-full pb-0 px-1 border-0 text-base ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,Hu),[[e.vModelText,e.unref(D)]]),e.createVNode(e.unref(du),{onClick:A})],512),[[e.vShow,e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Ru,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.hiddenBreadcrumbs,(E,w)=>(e.openBlock(),e.createElementBlock("div",{key:w,onDragover:$[11]||($[11]=_=>f(_)),onDragleave:$[12]||($[12]=_=>m(_)),onDrop:_=>a(_,w),onClick:_=>h(E),class:"px-2 py-0.5 hover:bg-gray-400/20 cursor-pointer items-center whitespace-nowrap"},[e.createElementVNode("div",ju,[e.createElementVNode("span",null,[e.createVNode(e.unref(Jt),{class:"h-5 w-5"})]),e.createTextVNode(),e.createElementVNode("span",Iu,e.toDisplayString(E.name),1)])],40,zu))),128))],512),[[e.vShow,e.unref(t).fs.showHiddenBreadcrumbs]])]))}},ur=(o,t=null)=>new Date(o*1e3).toLocaleString(t??navigator.language??"en-US"),Pu=["onClick"],qu={__name:"Toast",setup(o){const t=e.inject("ServiceContainer"),{getStore:n}=t.storage,s=e.ref(n("full-screen",!1)),r=e.ref([]),c=a=>a==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",l=a=>{r.value.splice(a,1)},i=a=>{let d=r.value.findIndex(f=>f.id===a);d!==-1&&l(d)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",a=>{let d=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");a.id=d,r.value.push(a),setTimeout(()=>{i(d)},5e3)}),(a,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([s.value.value?"fixed":"absolute","max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2 z-10"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(f,m)=>(e.openBlock(),e.createElementBlock("div",{onClick:p=>l(m),key:f,class:e.normalizeClass([c(f.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(f.label),11,Pu))),128))]),_:1})],2))}},Gu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},Ku=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1),Wu=[Ku];function Yu(o,t){return e.openBlock(),e.createElementBlock("svg",Gu,[...Wu])}const Xu={render:Yu},Ju={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},Qu=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1),Zu=[Qu];function em(o,t){return e.openBlock(),e.createElementBlock("svg",Ju,[...Zu])}const tm={render:em},Bt={__name:"SortIcon",props:{direction:String},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Xu),{key:0})):e.createCommentVNode("",!0),o.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(tm),{key:1})):e.createCommentVNode("",!0)]))}},om={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"},nm=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),rm=[nm];function sm(o,t){return e.openBlock(),e.createElementBlock("svg",om,[...rm])}const am={render:sm},lo={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("span",null,[o.type==="dir"?(e.openBlock(),e.createBlock(e.unref(Jt),{key:0,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"])):(e.openBlock(),e.createBlock(e.unref(am),{key:1,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"]))]))}},lm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"},cm=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),im=[cm];function dm(o,t){return e.openBlock(),e.createElementBlock("svg",lm,[...im])}const um={render:dm},mm={class:"absolute -z-50 -top-96"},fm={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},pm={__name:"DragItem",props:{count:{type:Number,default:0}},setup(o){const t=o;return(n,s)=>(e.openBlock(),e.createElementBlock("div",mm,[e.createVNode(e.unref(um)),e.createElementVNode("div",fm,e.toDisplayString(t.count),1)]))}},hm={class:"flex"},vm=["aria-label"],gm={class:"ml-auto mb-2"},km={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},ym={key:1},xm={__name:"Text",emits:["success"],setup(o,{emit:t}){const n=t,s=e.ref(""),r=e.ref(""),c=e.ref(null),l=e.ref(!1),i=e.ref(""),a=e.ref(!1),d=e.inject("ServiceContainer"),{t:f}=d.i18n;e.onMounted(()=>{d.requester.send({url:"",method:"get",params:{q:"preview",adapter:d.modal.data.adapter,path:d.modal.data.item.path},responseType:"text"}).then(u=>{s.value=u,n("success")})});const m=()=>{l.value=!l.value,r.value=s.value},p=()=>{i.value="",a.value=!1,d.requester.send({url:"",method:"post",params:{q:"save",adapter:d.modal.data.adapter,path:d.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(u=>{i.value=f("Updated."),s.value=u,n("success"),l.value=!l.value}).catch(u=>{i.value=f(u.message),a.value=!0})};return(u,h)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",hm,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(d).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(d).modal.data.item.basename),9,vm),e.createElementVNode("div",gm,[l.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:p,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(f)("Save")),1)):e.createCommentVNode("",!0),e.unref(d).features.includes(e.unref(oe).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:h[0]||(h[0]=k=>m())},e.toDisplayString(l.value?e.unref(f)("Cancel"):e.unref(f)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[l.value?(e.openBlock(),e.createElementBlock("div",ym,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:c,"onUpdate:modelValue":h[1]||(h[1]=k=>r.value=k),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh]",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",km,e.toDisplayString(s.value),1)),i.value.length?(e.openBlock(),e.createBlock(Me,{key:2,onHidden:h[2]||(h[2]=k=>i.value=""),error:a.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},_m={class:"flex"},wm=["aria-label"],bm={class:"ml-auto mb-2"},Em={class:"w-full flex justify-center"},Vm=["src"],Nm={__name:"Image",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,c=e.ref(null),l=e.ref(null),i=e.ref(!1),a=e.ref(""),d=e.ref(!1),f=()=>{i.value=!i.value,i.value?l.value=new Sr(c.value,{crop(p){}}):l.value.destroy()},m=()=>{l.value.getCroppedCanvas({width:795,height:341}).toBlob(p=>{a.value="",d.value=!1;const u=new FormData;u.set("file",p),s.requester.send({url:"",method:"post",params:{q:"upload",adapter:s.modal.data.adapter,path:s.modal.data.item.path},body:u}).then(h=>{a.value=r("Updated."),c.value.src=s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item),f(),n("success")}).catch(h=>{a.value=r(h.message),d.value=!0})})};return e.onMounted(()=>{n("success")}),(p,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",_m,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,wm),e.createElementVNode("div",bm,[i.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:m,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).features.includes(e.unref(oe).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:u[0]||(u[0]=h=>f())},e.toDisplayString(i.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Em,[e.createElementVNode("img",{ref_key:"image",ref:c,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(s).requester.getPreviewUrl(e.unref(s).modal.data.adapter,e.unref(s).modal.data.item),alt:""},null,8,Vm)]),a.value.length?(e.openBlock(),e.createBlock(Me,{key:0,onHidden:u[1]||(u[1]=h=>a.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},Sm={class:"flex"},$m=["aria-label"],Bm=e.createElementVNode("div",null,null,-1),Cm={__name:"Default",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t;return e.onMounted(()=>{s("success")}),(r,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Sm,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,$m)]),Bm],64))}},Dm=["aria-label"],Tm={class:"w-full aspect-video",preload:"",controls:""},Mm=["src"],Am={__name:"Video",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(c,l)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Dm),e.createElementVNode("div",null,[e.createElementVNode("video",Tm,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,Mm),e.createTextVNode(" Your browser does not support the video tag. ")])])]))}},Lm=["aria-label"],Om={class:"w-full",controls:""},Fm=["src"],Hm={__name:"Audio",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),r=()=>s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item);return e.onMounted(()=>{n("success")}),(c,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Lm),e.createElementVNode("div",null,[e.createElementVNode("audio",Om,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,Fm),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},Rm=["aria-label"],zm=["data"],jm=["src"],Im=e.createElementVNode("p",null,[e.createTextVNode(" Your browser does not support PDFs. "),e.createElementVNode("a",{href:"https://example.com/test.pdf"},"Download the PDF"),e.createTextVNode(" . ")],-1),Um=[Im],Pm={__name:"Pdf",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(c,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Rm),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:r(),width:"100%",height:"100%"},Um,8,jm)],8,zm)])],64))}},qm={class:"sm:flex sm:items-start"},Gm={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Km={key:0},Wm={class:"text-gray-700 dark:text-gray-200 text-sm"},Ym={key:0,class:"flex leading-5"},Xm=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Jm={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},Qm={class:"font-bold"},Zm={class:"font-bold pl-2"},e0={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},t0=["download","href"],mr={__name:"ModalPreview",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(!1),r=l=>(t.modal.data.item.mime_type??"").startsWith(l),c=t.features.includes(oe.PREVIEW);return c||(s.value=!0),(l,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i[6]||(i[6]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Close")),1),e.unref(t).features.includes(e.unref(oe).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(n)("Download")),9,t0)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",qm,[e.createElementVNode("div",Gm,[e.unref(c)?(e.openBlock(),e.createElementBlock("div",Km,[r("text")?(e.openBlock(),e.createBlock(xm,{key:0,onSuccess:i[0]||(i[0]=a=>s.value=!0)})):r("image")?(e.openBlock(),e.createBlock(Nm,{key:1,onSuccess:i[1]||(i[1]=a=>s.value=!0)})):r("video")?(e.openBlock(),e.createBlock(Am,{key:2,onSuccess:i[2]||(i[2]=a=>s.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(Hm,{key:3,onSuccess:i[3]||(i[3]=a=>s.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(Pm,{key:4,onSuccess:i[4]||(i[4]=a=>s.value=!0)})):(e.openBlock(),e.createBlock(Cm,{key:5,onSuccess:i[5]||(i[5]=a=>s.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Wm,[s.value===!1?(e.openBlock(),e.createElementBlock("div",Ym,[Xm,e.createElementVNode("span",null,e.toDisplayString(e.unref(n)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Jm,[e.createElementVNode("div",null,[e.createElementVNode("span",Qm,e.toDisplayString(e.unref(n)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Zm,e.toDisplayString(e.unref(n)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(ur)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(oe).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",e0,[e.createElementVNode("span",null,e.toDisplayString(e.unref(n)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}},o0={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"},n0=e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),r0=e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1),s0=[n0,r0];function a0(o,t){return e.openBlock(),e.createElementBlock("svg",o0,[...s0])}const fr={render:a0},l0=["data-type","data-item","data-index"],co={__name:"Item",props:{item:{type:Object},index:{type:Number},dragImage:{type:Object}},setup(o){const t=e.inject("ServiceContainer"),n=t.dragSelect,s=o,r=u=>{u.type==="dir"?(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:u.path}})):t.modal.open(mr,{adapter:t.fs.adapter,item:u})},c={mounted(u,h,k,v){k.props.draggable&&(u.addEventListener("dragstart",x=>l(x,h.value)),u.addEventListener("dragover",x=>a(x,h.value)),u.addEventListener("drop",x=>i(x,h.value)))},beforeUnmount(u,h,k,v){k.props.draggable&&(u.removeEventListener("dragstart",l),u.removeEventListener("dragover",a),u.removeEventListener("drop",i))}},l=(u,h)=>{if(u.altKey||u.ctrlKey||u.metaKey)return u.preventDefault(),!1;n.isDraggingRef.value=!0,u.dataTransfer.setDragImage(s.dragImage.$el,0,15),u.dataTransfer.effectAllowed="all",u.dataTransfer.dropEffect="copy",u.dataTransfer.setData("items",JSON.stringify(n.getSelected()))},i=(u,h)=>{u.preventDefault(),n.isDraggingRef.value=!1;let k=JSON.parse(u.dataTransfer.getData("items"));if(k.find(v=>v.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open($o,{items:{from:k,to:h}})},a=(u,h)=>{u.preventDefault(),!h||h.type!=="dir"||n.getSelection().find(k=>k===u.currentTarget)?(u.dataTransfer.dropEffect="none",u.dataTransfer.effectAllowed="none"):u.dataTransfer.dropEffect="copy"};let d=null,f=!1;const m=()=>{d&&clearTimeout(d)},p=u=>{if(!f)f=!0,setTimeout(()=>f=!1,300);else return f=!1,r(s.item),clearTimeout(d),!1;d=setTimeout(()=>{const h=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:u.target.getBoundingClientRect().x,clientY:u.target.getBoundingClientRect().y});u.target.dispatchEvent(h)},500)};return(u,h)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({opacity:e.unref(n).isDraggingRef.value&&e.unref(n).getSelection().find(k=>u.$el===k)?"0.5 !important":""}),class:e.normalizeClass(["vf-item-"+e.unref(n).explorerId,"relative"]),"data-type":o.item.type,key:o.item.path,"data-item":JSON.stringify(o.item),"data-index":o.index,onDblclick:h[0]||(h[0]=k=>r(o.item)),onTouchstart:h[1]||(h[1]=k=>p(k)),onTouchend:h[2]||(h[2]=k=>m()),onContextmenu:h[3]||(h[3]=e.withModifiers(k=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:k,items:e.unref(n).getSelected(),target:o.item}),["prevent"]))},[e.renderSlot(u.$slots,"default"),e.unref(t).pinnedFolders.find(k=>k.path===o.item.path)?(e.openBlock(),e.createBlock(e.unref(fr),{key:0,class:"absolute top-0 right-0 text-amber-600"})):e.createCommentVNode("",!0)],46,l0)),[[c,o.item]])}},c0={class:"relative flex-auto flex flex-col"},i0={key:0,class:"grid grid-cols-12 px-1 bg-neutral-50 dark:bg-gray-800 border-b border-neutral-300 dark:border-gray-700 text-xs select-none divide-x"},d0={class:"h-full"},u0={class:"relative"},m0={class:"grid grid-cols-12 items-center"},f0={class:"flex col-span-7 items-center"},p0={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},h0={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},v0={class:"grid grid-cols-12 items-center"},g0={class:"flex col-span-7 items-center"},k0={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},y0={class:"col-span-2 text-center"},x0={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap px-1 md:px-3"},_0={class:"relative"},w0=["data-src","alt"],b0={key:2,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},E0={class:"break-all"},V0={__name:"Explorer",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=m=>m==null?void 0:m.substring(0,3),r=e.ref(null),c=e.ref(""),l=t.dragSelect;let i;t.emitter.on("vf-fullscreen-toggle",()=>{l.area.value.style.height=null}),t.emitter.on("vf-search-query",({newQuery:m})=>{c.value=m,m?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:m},onSuccess:p=>{p.files.length||t.emitter.emit("vf-toast-push",{label:n("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})});const a=e.reactive({active:!1,column:"",order:""}),d=(m=!0)=>{let p=[...t.fs.data.files],u=a.column,h=a.order==="asc"?1:-1;if(!m)return p;const k=(v,x)=>typeof v=="string"&&typeof x=="string"?v.toLowerCase().localeCompare(x.toLowerCase()):v<x?-1:v>x?1:0;return a.active&&(p=p.slice().sort((v,x)=>k(v[u],x[u])*h)),p},f=m=>{a.active&&a.column===m?(a.active=a.order==="asc",a.column=m,a.order="desc"):(a.active=!0,a.column=m,a.order="asc")};return e.onMounted(()=>{i=new Nr(l.area.value)}),e.onUpdated(()=>{i.update()}),e.onBeforeUnmount(()=>{i.destroy()}),(m,p)=>(e.openBlock(),e.createElementBlock("div",c0,[e.unref(t).view==="list"||c.value.length?(e.openBlock(),e.createElementBlock("div",i0,[e.createElementVNode("div",{onClick:p[0]||(p[0]=u=>f("basename")),class:"col-span-7 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Name"))+" ",1),e.withDirectives(e.createVNode(Bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="basename"]])]),c.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:p[1]||(p[1]=u=>f("file_size")),class:"justify-center col-span-2 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Size"))+" ",1),e.withDirectives(e.createVNode(Bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="file_size"]])])),c.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:p[2]||(p[2]=u=>f("last_modified")),class:"justify-center col-span-3 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Date"))+" ",1),e.withDirectives(e.createVNode(Bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="last_modified"]])])),c.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:p[3]||(p[3]=u=>f("path")),class:"justify-center col-span-5 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Filepath"))+" ",1),e.withDirectives(e.createVNode(Bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",d0,[e.createElementVNode("div",u0,[e.createVNode(pm,{ref_key:"dragImage",ref:r,count:e.unref(l).getCount()},null,8,["count"])]),e.createElementVNode("div",{ref:e.unref(l).area,class:"h-full text-xs p-1 vf-selector-area z-0",onContextmenu:p[4]||(p[4]=e.withModifiers(u=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:u,items:e.unref(l).getSelected()}),["self","prevent"]))},[c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d(),(u,h)=>(e.openBlock(),e.createBlock(co,{item:u,index:h,dragImage:r.value,class:"vf-item vf-item-list"},{default:e.withCtx(()=>[e.createElementVNode("div",m0,[e.createElementVNode("div",f0,[e.createVNode(lo,{type:u.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",p0,e.toDisplayString(u.basename),1)]),e.createElementVNode("div",h0,e.toDisplayString(u.path),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="list"&&!c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(d(),(u,h)=>(e.openBlock(),e.createBlock(co,{item:u,index:h,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true",key:u.path},{default:e.withCtx(()=>[e.createElementVNode("div",v0,[e.createElementVNode("div",g0,[e.createVNode(lo,{type:u.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",k0,e.toDisplayString(u.basename),1)]),e.createElementVNode("div",y0,e.toDisplayString(u.file_size?e.unref(t).filesize(u.file_size):""),1),e.createElementVNode("div",x0,e.toDisplayString(e.unref(ur)(u.last_modified)),1)])]),_:2},1032,["item","index","dragImage"]))),128)):e.createCommentVNode("",!0),e.unref(t).view==="grid"&&!c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(d(!1),(u,h)=>(e.openBlock(),e.createBlock(co,{item:u,index:h,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",_0,[(u.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails?(e.openBlock(),e.createElementBlock("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"lazy h-10 md:h-12 m-auto","data-src":e.unref(t).requester.getPreviewUrl(e.unref(t).fs.adapter,u),alt:u.basename,key:u.path},null,8,w0)):(e.openBlock(),e.createBlock(lo,{key:1,type:u.type},null,8,["type"])),!((u.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails)&&u.type!=="dir"?(e.openBlock(),e.createElementBlock("div",b0,e.toDisplayString(s(u.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",E0,e.toDisplayString(e.unref(So)(u.basename)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0)],544),e.createVNode(qu)])]))}},N0=["href","download"],S0=["onClick"],$0={__name:"ContextMenu",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(null),r=e.ref([]),c=e.ref(""),l=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),i=e.computed(()=>l.items.filter(m=>m.key==null||t.features.includes(m.key)));t.emitter.on("vf-context-selected",m=>{r.value=m});const a={newfolder:{key:oe.NEW_FOLDER,title:()=>n("New Folder"),action:()=>t.modal.open(cr)},selectAll:{title:()=>n("Select All"),action:()=>t.dragSelect.selectAll()},markFavorite:{title:()=>n("Pin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.concat(r.value),t.storage.setStore("pinned-folders",t.pinnedFolders)}},removeFavorite:{title:()=>n("Unpin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.filter(m=>!r.value.find(p=>p.path===m.path)),t.storage.setStore("pinned-folders",t.pinnedFolders)}},delete:{key:oe.DELETE,title:()=>n("Delete"),action:()=>{t.modal.open(Ko,{items:r})}},refresh:{title:()=>n("Refresh"),action:()=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}},preview:{key:oe.PREVIEW,title:()=>n("Preview"),action:()=>t.modal.open(mr,{adapter:t.fs.adapter,item:r.value[0]})},open:{title:()=>n("Open"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].path}})}},openDir:{title:()=>n("Open containing folder"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].dir}})}},download:{key:oe.DOWNLOAD,link:e.computed(()=>t.requester.getDownloadUrl(t.fs.adapter,r.value[0])),title:()=>n("Download"),action:()=>{}},archive:{key:oe.ARCHIVE,title:()=>n("Archive"),action:()=>t.modal.open(dr,{items:r})},unarchive:{key:oe.UNARCHIVE,title:()=>n("Unarchive"),action:()=>t.modal.open(ir,{items:r})},rename:{key:oe.RENAME,title:()=>n("Rename"),action:()=>t.modal.open(Wo,{items:r})}},d=m=>{t.emitter.emit("vf-contextmenu-hide"),m.action()};t.emitter.on("vf-search-query",({newQuery:m})=>{c.value=m}),t.emitter.on("vf-contextmenu-show",({event:m,items:p,target:u=null})=>{if(l.items=[],c.value)if(u)l.items.push(a.openDir),t.emitter.emit("vf-context-selected",[u]);else return;else!u&&!c.value?(l.items.push(a.refresh),l.items.push(a.selectAll),l.items.push(a.newfolder),t.emitter.emit("vf-context-selected",[])):p.length>1&&p.some(h=>h.path===u.path)?(l.items.push(a.refresh),l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",p)):(u.type==="dir"?(l.items.push(a.open),t.pinnedFolders.findIndex(h=>h.path===u.path)!==-1?l.items.push(a.removeFavorite):l.items.push(a.markFavorite)):(l.items.push(a.preview),l.items.push(a.download)),l.items.push(a.rename),u.mime_type==="application/zip"?l.items.push(a.unarchive):l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",[u]));f(m)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const f=m=>{const p=t.dragSelect.area.value,u=t.root.getBoundingClientRect(),h=p.getBoundingClientRect();let k=m.clientX-u.left,v=m.clientY-u.top;l.active=!0,e.nextTick(()=>{var D;const x=(D=s.value)==null?void 0:D.getBoundingClientRect();let g=(x==null?void 0:x.height)??0,C=(x==null?void 0:x.width)??0;k=h.right-m.pageX+window.scrollX<C?k-C:k,v=h.bottom-m.pageY+window.scrollY<g?v-g:v,l.positions={left:k+"px",top:v+"px"}})};return(m,p)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:s,style:e.normalizeStyle(l.positions),class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded-sm select-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,u=>(e.openBlock(),e.createElementBlock("li",{class:"cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:u.title},[u.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"block pl-2 pr-3 py-2",target:"_blank",href:u.link,download:u.link,onClick:p[0]||(p[0]=h=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(u.title()),1)],8,N0)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"pl-2 pr-3 py-1.5",onClick:h=>d(u)},[e.createElementVNode("span",null,e.toDisplayString(u.title()),1)],8,S0))]))),128))],4)),[[e.vShow,l.active]])}},B0={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},C0=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1),D0=[C0];function T0(o,t){return e.openBlock(),e.createElementBlock("svg",B0,[...D0])}const pr={render:T0},M0={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"},A0=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1),L0=[A0];function O0(o,t){return e.openBlock(),e.createElementBlock("svg",M0,[...L0])}const F0={render:O0},H0={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none grow-0"},R0={class:"flex leading-5 items-center"},z0=["aria-label"],j0=["value"],I0={class:"ml-3"},U0={key:0},P0={class:"ml-1"},q0={class:"flex leading-5 items-center justify-end"},G0=["disabled"],K0=["aria-label"],W0={__name:"Statusbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{setStore:s}=t.storage,r=t.dragSelect,c=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),s("adapter",t.fs.adapter)},l=e.ref("");t.emitter.on("vf-search-query",({newQuery:a})=>{l.value=a});const i=e.computed(()=>{const a=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return t.selectButton.active&&a});return(a,d)=>(e.openBlock(),e.createElementBlock("div",H0,[e.createElementVNode("div",R0,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(n)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},[e.createVNode(e.unref(pr))],8,z0),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d[0]||(d[0]=f=>e.unref(t).fs.adapter=f),onChange:c,class:"py-0.5 text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,f=>(e.openBlock(),e.createElementBlock("option",{value:f},e.toDisplayString(f),9,j0))),256))],544),[[e.vModelSelect,e.unref(t).fs.adapter]]),e.createElementVNode("div",I0,[l.value.length?(e.openBlock(),e.createElementBlock("span",U0,e.toDisplayString(e.unref(t).fs.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",P0,e.toDisplayString(e.unref(t).dragSelect.getCount()>0?e.unref(n)("%s item(s) selected.",e.unref(t).dragSelect.getCount()):""),1)])]),e.createElementVNode("div",q0,[e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!i.value}]),disabled:!i.value,onClick:d[1]||(d[1]=f=>e.unref(t).selectButton.click(e.unref(r).getSelected(),f))},e.toDisplayString(e.unref(n)("Select")),11,G0)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(n)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:d[2]||(d[2]=f=>e.unref(t).modal.open(lr))},[e.createVNode(e.unref(F0))],8,K0)])]))}},Y0={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},X0=e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),J0=e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1),Q0=[X0,J0];function Z0(o,t){return e.openBlock(),e.createElementBlock("svg",Y0,[...Q0])}const ef={render:Z0},tf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},of=e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),nf=e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1),rf=[of,nf];function sf(o,t){return e.openBlock(),e.createElementBlock("svg",tf,[...rf])}const af={render:sf},lf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},cf=e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),df=e.createElementVNode("path",{d:"M9 12h6"},null,-1),uf=[cf,df];function mf(o,t){return e.openBlock(),e.createElementBlock("svg",lf,[...uf])}const ff={render:mf};function hr(o,t){const n=o.findIndex(s=>s.path===t.path);n>-1?o[n]=t:o.push(t)}const pf={key:1,class:"cursor-pointer"},vr={__name:"FolderLoaderIndicator",props:e.mergeModels({adapter:{type:String,required:!0},path:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=o,n=e.inject("ServiceContainer");n.i18n;const s=e.useModel(o,"modelValue"),r=e.ref(!1);function c(){return s.value=!s.value}function l(){return n.treeViewData.find(a=>a.path===t.path)}const i=()=>{r.value=!0,n.requester.send({url:"",method:"get",params:{q:"subfolders",adapter:t.adapter,path:t.path}}).then(a=>{hr(n.treeViewData,{path:t.path,...a})}).catch(a=>{}).finally(()=>{r.value=!1})};return(a,d)=>{var f;return e.openBlock(),e.createElementBlock("div",{class:"h-5 w-5 shrink-0",onClick:d[0]||(d[0]=m=>{var p;return(!s.value||((p=l())==null?void 0:p.folders.length))&&c()&&(l()||i())})},[r.value?(e.openBlock(),e.createBlock(e.unref(Yo),{key:0,class:"p-1"})):(e.openBlock(),e.createElementBlock("div",pf,[s.value&&((f=l())!=null&&f.folders.length)?(e.openBlock(),e.createBlock(e.unref(ff),{key:0,class:"text-gray-600"})):e.createCommentVNode("",!0),s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(af),{key:1,class:"text-gray-400"}))]))])}}},hf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"},vf=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1),gf=[vf];function kf(o,t){return e.openBlock(),e.createElementBlock("svg",hf,[...gf])}const yf={render:kf},xf={class:"block"},_f={class:"flex hover:text-sky-700 dark:hover:text-sky-200/50 rounded"},wf={class:"h-5 w-5 shrink-0"},bf=["onClick"],Ef={class:"h-5 w-5 shrink-0"},Vf={class:"text-nowrap"},Nf={class:"pl-4"},Sf={__name:"TreeSubfolderList",props:{adapter:{type:String,required:!0},path:{type:String,required:!0}},setup(o){const t=e.inject("ServiceContainer"),n=e.ref([]),s=o,r=e.computed(()=>{var c;return((c=t.treeViewData.find(l=>l.path===s.path))==null?void 0:c.folders)||[]});return(c,l)=>{const i=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",xf,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(a,d)=>(e.openBlock(),e.createElementBlock("li",{class:"flex flex-col space-x-0.5 py-0.5 text-sm",key:a.path},[e.createElementVNode("div",_f,[e.createElementVNode("div",wf,[e.createVNode(vr,{adapter:o.adapter,path:a.path,modelValue:n.value[a.path],"onUpdate:modelValue":f=>n.value[a.path]=f},null,8,["adapter","path","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",{class:"flex cursor-pointer",onClick:f=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:s.adapter,path:a.path}})},[e.createElementVNode("div",Ef,[e.unref(t).fs.path===a.path?(e.openBlock(),e.createBlock(e.unref(yf),{key:0})):(e.openBlock(),e.createBlock(e.unref(Jt),{key:1}))]),e.createElementVNode("div",Vf,e.toDisplayString(a.basename),1)],8,bf)]),e.createElementVNode("div",Nf,[e.withDirectives(e.createVNode(i,{adapter:s.adapter,path:a.path},null,8,["adapter","path"]),[[e.vShow,n.value[a.path]]])])]))),128))])}}},$f={class:"pt-1 px-1 uppercase font-bold text-gray-400 dark:text-gray-500 text-xs flex justify-between"},Bf={class:"h-5 w-5 shrink-0"},Cf={class:"mr-3"},Df={__name:"TreeStorageItem",props:{storage:{type:String,required:!0}},setup(o){const t=e.inject("ServiceContainer"),n=e.ref(!1),s=r=>{t.fs.adapter=r,t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:r}}),t.storage.setStore("adapter",r)};return(r,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",$f,[e.createElementVNode("div",{class:e.normalizeClass(["flex flex-1 space-x-1 items-center cursor-pointer",o.storage===e.unref(t).fs.adapter?"text-gray-700/80 dark:text-gray-300/80 text-bold":""]),onClick:c[0]||(c[0]=l=>s(o.storage))},[e.createElementVNode("div",Bf,[e.createVNode(e.unref(pr))]),e.createElementVNode("div",null,e.toDisplayString(o.storage),1)],2),e.createElementVNode("div",Cf,[e.createVNode(vr,{adapter:o.storage,path:o.storage+"://",modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=l=>n.value=l)},null,8,["adapter","path","modelValue"])])]),e.withDirectives(e.createVNode(Sf,{adapter:o.storage,path:o.storage+"://"},null,8,["adapter","path"]),[[e.vShow,n.value]])],64))}},Tf={class:"p-1 uppercase font-bold text-gray-400 dark:text-gray-400 text-xs flex items-center space-x-1"},Mf={class:"block"},Af={class:"flex pl-2 py-0.5 text-sm space-x-2"},Lf=["onClick"],Of=["title"],Ff=["onClick"],Hf={key:0},Rf={class:"rounded-lg p-1 bg-gray-100 dark:bg-gray-700 text-xs text-center"},zf={__name:"TreeView",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(176),r=i=>{t.pinnedFolders=t.pinnedFolders.filter(a=>a.path!==i.path),t.storage.setStore("pinned-folders",t.pinnedFolders)},c=i=>{const a=i.clientX,d=i.target.parentElement,f=d.getBoundingClientRect().width;d.classList.remove("transition-[width]"),d.classList.add("transition-none");const m=u=>{s.value=f+u.clientX-a,s.value<50&&(s.value=0,t.showTreeView=!1),s.value>50&&(t.showTreeView=!0)},p=()=>{const u=d.getBoundingClientRect();s.value=u.width,d.classList.add("transition-[width]"),d.classList.remove("transition-none"),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p)};window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)},l=e.ref(null);return e.onMounted(()=>{Ge(l.value,{})}),e.watch(t.fs.data,(i,a)=>{const d=i.files.filter(f=>f.type==="dir");hr(t.treeViewData,{path:t.fs.path,folders:d.map(f=>({adapter:f.storage,path:f.path,basename:f.basename}))})}),(i,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:a[0]||(a[0]=d=>e.unref(t).showTreeView=!e.unref(t).showTreeView),class:e.normalizeClass(["w-full h-full bg-gray-300/10 dark:bg-gray-700/10 z-[1]",e.unref(t).showTreeView?"backdrop-blur-sm absolute md:hidden":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(t).showTreeView?"min-width:50px;max-width:75%; width: "+s.value+"px":"width: 0"),class:"absolute h-full md:h-auto md:relative shadow-lg shrink-0 transition-[width] ease-in-out duration-200 z-[1] bg-gray-50 dark:bg-[#242f41]"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:l,class:"h-full border-r dark:border-gray-600/50 pb-4"},[e.createElementVNode("div",Tf,[e.createElementVNode("div",null,[e.createVNode(e.unref(fr),{class:"text-amber-600"})]),e.createElementVNode("div",null,e.toDisplayString(e.unref(n)("Pinned Folders")),1)]),e.createElementVNode("ul",Mf,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).pinnedFolders,d=>(e.openBlock(),e.createElementBlock("li",Af,[e.createElementVNode("div",{class:"flex hover:text-sky-500 dark:hover:text-sky-200/50 rounded cursor-pointer",onClick:f=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:d.storage,path:d.path}})},[e.createVNode(e.unref(Jt),{class:"h-5 w-5"}),e.createElementVNode("div",{title:d.path},e.toDisplayString(d.basename),9,Of)],8,Lf),e.createElementVNode("div",{class:"cursor-pointer",onClick:f=>r(d)},[e.createVNode(e.unref(ef),{class:"p-0.5 text-gray-200 hover:text-gray-400 dark:text-gray-600 hover:dark:text-gray-400"})],8,Ff)]))),256)),e.unref(t).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Hf,[e.createElementVNode("div",Rf,e.toDisplayString(e.unref(n)("No folders pinned")),1)]))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,d=>(e.openBlock(),e.createElementBlock("div",null,[e.createVNode(Df,{storage:d},null,8,["storage"])]))),256))],512),e.createElementVNode("div",{onMousedown:c,class:e.normalizeClass([(e.unref(t).showTreeView,""),"transition-colors ease-in-out duration-200 top-0 hover:bg-slate-600/10 dark:hover:bg-slate-300/10 w-1 h-full absolute -right-0.5 cursor-ew-resize"])},null,34)],4)],64))}},jf={class:"relative flex overflow-hidden h-full"},If={__name:"VueFinder",props:{id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{type:Array,default:[]},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default(o){return{active:!1,multiple:!1,click:t=>{},...o}}}},emits:["select"],setup(o,{emit:t}){const n=t,r=Rs(o,e.inject("VueFinderOptions"));e.provide("ServiceContainer",r);const{setStore:c}=r.storage,l=e.ref(null);r.root=l;const i=r.dragSelect;Al(r);const a=f=>{Object.assign(r.fs.data,f),i.clearSelection(),i.refreshSelection()};let d;return r.emitter.on("vf-fetch-abort",()=>{d.abort(),r.fs.loading=!1}),r.emitter.on("vf-fetch",({params:f,body:m=null,onSuccess:p=null,onError:u=null,noCloseModal:h=!1})=>{["index","search"].includes(f.q)&&(d&&d.abort(),r.fs.loading=!0),d=new AbortController;const k=d.signal;r.requester.send({url:"",method:f.m||"get",params:f,body:m,abortSignal:k}).then(v=>{r.fs.adapter=v.adapter,r.persist&&(r.fs.path=v.dirname,c("path",r.fs.path)),["index","search"].includes(f.q)&&(r.fs.loading=!1),h||r.modal.close(),a(v),p&&p(v)}).catch(v=>{console.error(v),u&&u(v)})}),e.onMounted(()=>{let f={};r.fs.path.includes("://")&&(f={adapter:r.fs.path.split("://")[0],path:r.fs.path}),r.emitter.emit("vf-fetch",{params:{q:"index",adapter:r.fs.adapter,...f}}),i.onSelect(m=>{n("select",m)})}),(f,m)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:l,tabindex:"0"},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(r).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).fullScreen?"fixed w-screen inset-0 z-20":"relative rounded resize-y ","overflow-hidden min-h-44 border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 select-none"]),style:e.normalizeStyle(e.unref(r).fullScreen?"":"max-height: "+o.maxHeight),onMousedown:m[0]||(m[0]=p=>e.unref(r).emitter.emit("vf-contextmenu-hide")),onTouchstart:m[1]||(m[1]=p=>e.unref(r).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(pd),e.createVNode(Uu),e.createElementVNode("div",jf,[e.createVNode(zf),e.createVNode(V0)]),e.createVNode(W0)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(r).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode($0)],2)],512))}},Uf={install(o,t={}){t.i18n=t.i18n??{};let[n]=Object.keys(t.i18n);t.locale=t.locale??n??"en",o.provide("VueFinderOptions",t),o.component("VueFinder",If)}};module.exports=Uf;
